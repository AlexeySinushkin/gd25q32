<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0054)http://easystm32.ru/interfaces/45-spi-interface-part-2 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru-ru" lang="ru-ru" dir="ltr" slick-uniqueid="3"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <!--<base href="http://easystm32.ru/interfaces/45-spi-interface-part-2">--><base href=".">
  
  <meta name="keywords" content="Микроконтроллеры, электроника, STM32">
  <meta name="author" content="Medved">
  <meta name="description" content="Микроконтроллеры STM32">
  <meta name="generator" content="Joomla! - Open Source Content Management">
  <title>EasySTM32 - Интерфейс SPI в STM32. Часть 2</title>
  <link href="http://easystm32.ru/templates/shoplab/favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon">
  <link href="http://easystm32.ru/component/search/?Itemid=110&catid=12&id=45&format=opensearch" rel="search" title="Искать EasySTM32" type="application/opensearchdescription+xml">
  <style type="text/css">

#wrapper { margin: 0 auto; width: 960px;padding:0;}
	.s-c-s #colmid { left:245px;}
	.s-c-s #colright { margin-left:-245px;}
	.s-c-s #col1pad { margin-left:245px;}
	.s-c-s #col2 { left:0px;width:245px;}
	.s-c-s #col3 { width:0px;}
	.s-c-x #colright { left:245px;}
	.s-c-x #col1wrap { right:245px;}
	.s-c-x #col1 { margin-left:245px;}
	.s-c-x #col2 { right:245px;width:245px;}
	.x-c-s #colright { margin-left:-0px;}
	.x-c-s #col1 { margin-left:0px;}
	.x-c-s #col3 { left:0px;width:0px;}
  </style>
  <script type="text/javascript" async="" src="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/watch.js"></script><script src="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/mootools-core.js" type="text/javascript"></script>
  <script src="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/core.js" type="text/javascript"></script>
  <script src="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/caption.js" type="text/javascript"></script>
  <script src="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/mootools-more.js" type="text/javascript"></script>
  <script type="text/javascript">
window.addEvent('load', function() {
				new JCaption('img.caption');
			});
function keepAlive() {	var myAjax = new Request({method: "get", url: "index.php"}).send();} window.addEvent("domready", function(){ keepAlive.periodical(840000); });
  </script>
  <link type="text/css" rel="stylesheet" href="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/shCore.css">
<link type="text/css" rel="stylesheet" href="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/shThemeDefault.css">
<script type="text/javascript" src="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/shCore.js"></script>
  <script type="text/javascript" src="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/shBrushCpp.js"></script>

<link rel="stylesheet" href="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/system.css" type="text/css">
<link rel="stylesheet" href="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/styles.css" type="text/css" media="screen,projection">
<script language="javascript" type="text/javascript">  
  window.addEvent('domready', function(){  
      var top_panel = document.id('top-panel');
    var sub_panel = document.id('sub-panel');
    var topFx = new Fx.Slide(top_panel);
    if (Cookie.read('top-panel') == '1') {
      topFx.show();
    } else {
      topFx.hide();      
    }
    sub_panel.addEvents({
      'click' : function(){
        if (topFx.open) {
          Cookie.write('top-panel', '0');
        } else {
          Cookie.write('top-panel', '1');
        }
        topFx.toggle();
      }
    });
  });  
</script>
<style type="text/css" id="begun-block-css-353320860">.begun_adv * {clear:none !important;color:#000 !important;float:none !important;margin:0 !important;padding:0 !important;letter-spacing:normal !important;word-spacing:normal !important;z-index:auto !important;font-size:12px !important;font:normal normal 12px Arial,sans-serif !important;text-transform:none !important;list-style:none !important;position:static !important;text-indent:0 !important;visibility:visible !important;white-space:normal !important;}.begun_adv_common {position:relative !important;width:100% !important;}.begun_adv_common tr,.begun_adv_common td,.begun_adv_common a,.begun_adv_common b,.begun_adv_common div,.begun_adv_common span {background:none !important;border:none !important;}#begun_block_353320860 {height:auto !important;width:auto !important;line-height:normal !important;margin:0 !important;padding:0 !important;font:12px/18px Arial,sans-serif !important;color:#000 !important;text-align:left !important;}#begun_block_353320860 wbr {display:inline-block !important;}#begun_block_353320860 .begun_adv_span {display:inline-block !important;position:relative !important;width:auto !important;height:auto !important;margin:0 !important;padding:0 !important;}#begun_block_353320860 .begun_adv {-moz-box-sizing:border-box !important;-webkit-box-sizing:border-box !important;box-sizing:border-box !important;}#begun_block_353320860 *:after,#begun_block_353320860 *:before {content:normal !important;}#begun_block_353320860 b {font-weight:bold !important;display:inline !important;}#begun_block_353320860 .begun_adv,#begun_block_353320860 table,#begun_block_353320860 td,#begun_block_353320860 div {padding:0 !important;text-align:left !important;table-layout:auto !important;}#begun_block_353320860 .begun_adv table {border:none !important;border-collapse:collapse !important;}#begun_block_353320860 td {vertical-align:middle !important;}#begun_block_353320860 .begun_adv_cell {text-align:left !important;}#begun_block_353320860 .begun_adv_bullit {color:#aaa !important;}#begun_block_353320860 .begun_adv_title,#begun_block_353320860 .begun_adv_text {display:block !important;}#begun_block_353320860 .begun_adv_title .begun_favicon {width:16px !important;height:16px !important;margin-right:6px !important;vertical-align:middle !important;}#begun_block_353320860 a.begun_adv_sys_logo {position:absolute !important;right:0 !important;bottom:0 !important;z-index:1 !important;height:16px !important;padding:0 5px 2px 1px !important;background:#f7fff5 !important;}#begun_block_353320860 span.begun_adv_age {position:absolute !important;right:0 !important;top:0 !important;padding:2px 5px 0 0 !important;font-style:italic !important;color:#622678 !important;color:#000000 !important;font-weight:bold !important;}#begun_block_353320860 .begun_hover a.begun_adv_sys_logo {background: !important;}#begun_block_353320860 .begun_adv_sys_logo,#begun_block_353320860 .begun_adv_sys_logo a {font-size:14px !important;line-height:16px !important;text-align:right !important;color:#000000 !important;text-decoration:none !important;font-weight:bold !important;font-style:normal !important;}#begun_block_353320860 .begun_adv_sys_logo strong {display:none !important;line-height:16px !important;font-size:14px !important;font-weight:bold !important;letter-spacing:-1px !important;color:#000000 !important;}#begun_block_353320860 .begun_adv_sys_logo strong {*display:inline !important;}#begun_block_353320860 .begun_adv_sys_logo img {*display:none !important;}#begun_block_353320860 .begun_collapsable .begun_adv_cell .begun_adv_cell {padding:5px 2px 4px 5px !important;}#begun_block_353320860 .begun_adv_fix .begun_adv_title {margin-bottom:2px !important;}#begun_block_353320860 .begun_adv_fix .begun_adv_common {overflow:hidden !important;width:auto !important;}#begun_block_353320860.begun_auto_rich .begun_adv_fix .begun_adv_common {overflow:visible !important;}#begun_block_353320860 .begun_adv_text {padding:2px 0 !important;line-height:1 !important;}#begun_block_353320860 .begun_adv_block {border:none !important;cursor:pointer !important;cursor:hand !important;}#begun_block_353320860 .begun_adv_title a.begun_cross {float:right !important;margin-left:8px !important;font-size:18px !important;text-decoration:none !important;font-weight:normal !important;line-height:14px !important;color:#118F00 !important;opacity:0.25 !important;filter:alpha(opacity=25) !important;}#begun_block_353320860 .begun_adv_title a.begun_cross:hover {color:#118F00 !important;}#begun_block_353320860 .begun_adv_phone {width:12px !important;margin:1px 3px 0 0 !important;position:absolute !important;top:0 !important;left:0 !important;}#begun_block_353320860 .begun_adv_phone_wrapper {padding-left:15px !important;white-space:nowrap !important;position:relative !important;display:inline-block !important;_display:inline !important;zoom:1 !important;}#begun_block_353320860 .begun_adv_phone_wrapper.begun_adv_phone_no_icon {padding-left:0 !important;}#begun_block_353320860 div.begun_adv_contact > .begun_adv_phone {margin:0 5px 0 0 !important;}#begun_block_353320860 .begun_adv_phone b {border:#000 solid 0 !important;height:1px !important;font-size:1px !important;line-height:1px !important;display:block !important;overflow:hidden !important;}#begun_block_353320860 .begun_adv_phone .p0,#begun_block_353320860 .begun_adv_phone .p1,#begun_block_353320860 .begun_adv_phone .p3,#begun_block_353320860 .begun_adv_phone .p5,#begun_block_353320860 .begun_adv_phone .p8 {background-color:#000 !important;}#begun_block_353320860 .begun_adv_phone .p1,#begun_block_353320860 .begun_adv_phone .p7,#begun_block_353320860 .begun_adv_phone .p8 {margin:0 1px !important;}#begun_block_353320860 .begun_adv_phone .p2,#begun_block_353320860 .begun_adv_phone .p7 {border-width:0 4px !important;}#begun_block_353320860 .begun_adv_phone .p3,#begun_block_353320860 .begun_adv_phone .p6 {margin:0 2px !important;}#begun_block_353320860 .begun_adv_phone .p0 {margin:0 3px !important;}#begun_block_353320860 .begun_adv_phone .p4 {border-width:0 3px !important;}#begun_block_353320860 .begun_adv_phone .p5 {margin:0 4px !important;}#begun_block_353320860 .begun_adv_phone .p6 {border-width:0 2px !important;}#begun_block_353320860 .begun_adv_phone .p8 {height:2px !important;}#begun_block_353320860 .begun_adv_phone b {border-color:#118F00 !important;}#begun_block_353320860 .begun_adv_phone .p0,#begun_block_353320860 .begun_adv_phone .p1,#begun_block_353320860 .begun_adv_phone .p3,#begun_block_353320860 .begun_adv_phone .p5,#begun_block_353320860 .begun_adv_phone .p8 {background-color:#118F00 !important;}#begun_block_353320860 .begun_adv_phone {font-size:11px !important;line-height:11px !important;margin-top:1px !important;}#begun_block_353320860 .begun_adv_title * {line-height:1.2 !important;color:#0073a8 !important;font-size:18px !important;font-size: !important;font-weight:normal !important;font-weight: !important;}#begun_block_353320860 .begun_collapsable .begun_adv_title *{font-size:12px !important;}#begun_block_353320860 .begun_adv_title a:hover,#begun_block_353320860 .begun_adv_title a:hover * {color:#f00 !important;color:#FF0000 !important;}#begun_block_353320860 .begun_adv_text * {line-height:1.2 !important;color:#000 !important;color:#000000 !important;font-size:12px !important;font-size: !important;text-decoration:none !important;}#begun_block_353320860 .begun_adv_ver .begun_adv_cell .begun_adv_block .begun_adv_text {font-size:14px !important;font-size: !important;}#begun_block_353320860 .begun_adv_ver .begun_adv_cell .begun_adv_block .begun_adv_text * {font-size:14px !important;font-size: !important;}#begun_block_353320860 .begun_adv_hor .begun_adv_cell .begun_adv_block .begun_adv_text {font-size:14px !important;font-size: !important;}#begun_block_353320860 .begun_adv_hor .begun_adv_cell .begun_adv_block .begun_adv_text * {font-size:14px !important;font-size: !important;}#begun_block_353320860 .begun_adv_geo,#begun_block_353320860 .begun_adv_geo * {color:#000 !important;color:#000000 !important;text-decoration:none !important;font-size: !important;font-weight:bold !important;cursor:text !important;}#begun_block_353320860 div.begun_adv_contact {*position:relative !important;*top:3px !important;*margin-top:-3px !important;}#begun_block_353320860 .begun_adv_contact,#begun_block_353320860 .begun_adv_contact * {color:#118F00 !important;font-size:12px !important;font-size: !important;line-height:1.2 !important;}#begun_block_353320860 .begun_adv_contact span {padding-right:2px !important;}#begun_block_353320860 .begun_adv_contact a {color:#118F00 !important;text-decoration:none !important;}#begun_block_353320860 .begun_adv_thumb .begun_thumb {float:left !important;display:block !important;_display:inline !important;z-index:1 !important;overflow:hidden !important;zoom:1 !important;margin:0 auto 5px 7px !important;}#begun_block_353320860 .begun_adv_thumb .begun_thumb img {z-index:20 !important;}#begun_block_353320860 .begun_adv_rich {overflow:visible !important;}#begun_block_353320860 .begun_adv_rich .begun_adv_image {float:left !important;margin-right:10px !important;_margin-right:7px !important;top:0 !important;width:72px !important;height:72px !important;position:relative !important;}#begun_block_353320860 .begun_adv_thumb .begun_adv_block {margin-left:60px !important;_zoom:1 !important;}#begun_block_353320860 .begun_adv_rich .begun_adv_block {margin-left:82px !important;_margin-left:79px !important;word-wrap:break-word !important;}#begun_block_353320860.begun_auto_rich .banners_count_1 .begun_adv_block * {text-align:left !important;}#begun_block_353320860 .begun_adv_cell .begun_adv_phone_wrapper .begun_adv_phone *,#begun_block_353320860.begun_auto_rich .begun_adv_cell .begun_adv_phone_wrapper .begun_adv_phone *,#begun_block_353320860 #begun_warn_353320860.banners_count_3 .begun_adv_cell .begun_adv_phone * {font-size:1px !important;}#begun_block_353320860 .begun_adv_ver .begun_adv_phone {margin-top:3px !important;}#begun_block_353320860 .begun_mobile_classic .begun_adv_common .begun_adv_table .begun_adv_title * {font-size:18px !important;}#begun_block_353320860 .begun_mobile_classic .begun_adv_common .begun_adv_table .begun_adv_text * {font-size:14px !important;}#begun_block_353320860 .begun_mobile_rich .begun_adv_common .begun_adv_table .begun_adv_title * {font-size:24px !important;font-weight:bold !important;}#begun_block_353320860 .begun_mobile_rich .begun_adv_common .begun_adv_table .begun_adv_text * {font-size:18px !important;}#begun_block_353320860 .begun_mobile_icon {background-image:-webkit-gradient(linear,left bottom,left top,color-stop(0,#D0DCF9),color-stop(1,#F7F8FC)) !important;background-repeat:no-repeat !important;background-size:90px 90px !important;border-color:#7F9DE6 !important;border-radius:5px !important;-webkit-border-radius:5px !important;border-style:solid !important;border-width:1px !important;margin-right:10px !important;height:90px !important;margin-bottom:10px !important;width:90px !important;}#begun_block_353320860 .begun_mobile_icon img {height:70px !important;margin:10px !important;width:70px !important;}#begun_block_353320860 .begun_mobile_classic .begun_mobile_icon {background-size:30px 30px !important;height:30px !important;width:30px !important;float:left !important;}#begun_block_353320860 .begun_mobile_classic .begun_mobile_icon img {height:20px !important;margin:5px !important;width:20px !important;}#begun_block_353320860 .gift {display:none !important;}#begun_block_353320860 .begun_warn_message {position:relative !important;display:block !important;margin-top:4px !important;padding-left:16px !important;line-height:10px !important;font-size:9px !important;text-indent:-16px !important;color:#aaa !important;}#begun_block_353320860 .begun_warn_message .begun_warn_icon {display:inline-block !important;position:relative !important;padding-right:16px !important;vertical-align:top !important;_display:inline !important;zoom:1 !important;}#begun_block_353320860 .begun_warn_message .begun_warn_icon i {position:absolute !important;top:-2px !important;width:12px !important;height:13px !important;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAANCAYAAACdKY9CAAAACXBIWXMAAAsSAAALEgHS3X78AAAA10lEQVQoz43SvUpDQRAF4G/XC2muxD98AYsEe7HIC1jYiM+RSsFWGxvzLkJsfAVha4m1VhKCcmvRZoQ1iObAMGcPZ9iZ3UmlFBV2cYL9OD/iFq/fhqYyn+ESrZ+Y4CqyHOJ1CC067EV0od2ERyqlHOABKYrfsRH8Df3gnzjMGFfmv5AwzhhZHaNcXbkK+g2esV2JLUrFa7xk3P3S62bE8mzTVErZwRO2/nmlBQYN5jjFFOvo4SJMvchdeOapWo1hfN4R1kL7wD3OMVtejRmOo7VhpS3qIb4AJKgth4BJRpoAAAAASUVORK5CYII=") transparent 0 0 no-repeat !important;}#begun_block_353320860 .begun_adv a { /* .begun_adv increases the selectors specifity. #id a {display: block} - common pattern #6453, #6620 */display: inline;vertical-align: baseline;text-decoration: underline;opacity: 1 !important;}#begun_block_353320860 .begun_adv {background-color: #f7fff5; /* no !important for hover */border: 1px solid #2cba00; /* no !important for hover */font-family:inherit; /* no !important for hover */}#begun_block_353320860 .begun_adv *, .begun_adv *:hover {width: auto; /* no !important for rich-images */height: auto; /* no !important for rich-images */background: none; /* no !important for hover */border: none; /* no !important for hover */}#begun_block_353320860 .begun_adv.begun_hover {background-color: ; /* no !important for hover */border: 1px solid ; /* no !important for hover */ /* no !important for hover */}#begun_block_353320860 td {overflow: visible;}#begun_block_353320860 .begun_adv_rich .begun_active_image {z-index:1000;}#begun_block_353320860 .begun_adv_rich .begun_active_image img {z-index:1000 !important;}#begun_block_353320860 .begun_adv_rich .begun_adv_image img {border:1px solid #2cba00;position:absolute !important;background:#fff !important;top:0;left:0;max-width:none !important;z-index:20;cursor:pointer;}#begun_block_353320860 .begun_adv_rich .begun_adv_picture {/*width:70px;height:70px;*/position:absolute !important;z-index:20;}#begun_block_353320860 .begun_collapsed {height:45px !important;overflow:hidden !important;}#begun_block_353320860 .begun_collapsed .begun_adv_title {margin-bottom:30px !important;}#begun_block_353320860 .begun_adv,#begun_block_353320860 .begun_adv .begun_adv_table,#begun_block_353320860 .begun_adv_span {	width: 100% !important;	border-collapse: collapse !important;}#begun_block_353320860 .begun_adv_common {	padding-bottom: 6px !important;}#begun_block_353320860 .begun_adv_cell .begun_adv_cell {	padding: 8px 16px 8px 8px !important;}#begun_block_353320860 .begun_adv td {	vertical-align: top !important;}#begun_block_353320860.begun_rich_mini .begun_adv_cell .begun_adv_title {	margin-top: 0 !important;	margin-bottom: 4px !important;}#begun_block_353320860.begun_rich_mini .begun_adv_rich .begun_adv_block {    margin-left: 71px !important;}#begun_block_353320860.begun_rich_mini .begun_adv_cell .begun_adv_block .begun_adv_text {	padding: 0 !important;	line-height: 1.1 !important;},#begun_block_353320860.begun_rich_mini .begun_adv_cell .begun_adv_block .begun_adv_text * {	line-height: 1.1 !important;}#begun_block_353320860.begun_rich_mini .begun_adv_cell .begun_adv_image {    top: 1px !important;    width: 62px !important;    height: 62px !important;    margin-right: 9px !important;}#begun_block_353320860.begun_rich_mini .begun_adv_cell .begun_adv_image img {	image-rendering: optimizeQuality;	-ms-interpolation-mode: bicubic;	width: 60px;	height: 60px;}#begun_top_mobile_block_wrapper #begun_block_353320860 .begun_mobile_rich .begun_adv_title * {	font-size: 38px !important;	font-weight: bold !important;}#begun_top_mobile_block_wrapper #begun_block_353320860 .begun_mobile_rich .begun_adv_text * {	font-size: 24px !important;}#begun_block_353320860 .begun_mobile_icon {	float: left !important;	margin-bottom: 0 !important;}</style></head>
<body>
<div id="popup_name" class="popup_block">
</div>

<div class="topground"></div>
<div id="main"> 
  <div id="wrapper">
      <div id="header"><div class="headtop"><div style="margin: 0px; position: static; overflow: hidden; height: 0px;"><div id="top-panel" style="margin: -20px 0px 0px;"> 
<div class="currency"></div>
       </div></div>
        <div id="sub-panel">

</div></div>
              <div class="logo">  
                <a href="http://easystm32.ru/" id="logo" title="EasySTM32.ru"><img src="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/logo.jpg" alt=""></a>
        </div>
          <div class="supertop"><div class="left"></div><div class="arm">
<ul class="menu">
<li class="item-106"><a href="http://easystm32.ru/donate">Donate!</a></li></ul>
</div><div class="clr"></div></div>      
    </div>
  <div id="navigace"><div class="levy">
<img alt="" src="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/levy.png">
</div>   <div class="pravy">
<img alt="" src="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/pravy.png">
</div>  
        <form action="http://easystm32.ru/interfaces" method="post">
<div class="search">
<input name="searchword" id="mod-search-searchword" maxlength="20" class="inputbox" type="text" size="20" value="Поиск..." onblur="if (this.value==&#39;&#39;) this.value=&#39;Поиск...&#39;;" onfocus="if (this.value==&#39;Поиск...&#39;) this.value=&#39;&#39;;"><input type="image" class="button" src="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/buttonsearch.png" onclick="this.form.searchword.focus();" alt="submit"><input type="hidden" name="task" value="search">
<input type="hidden" name="option" value="com_search">
<input type="hidden" name="Itemid" value="110">
</div>
</form>
      
<ul class="menu">
<li class="item-122"><a href="http://easystm32.ru/soft">Программы</a></li><li class="item-120"><a href="http://easystm32.ru/library">Библиотека</a></li><li class="item-119"><a href="http://easystm32.ru/about">О сайте</a></li><li class="item-121"><a href="http://easystm32.ru/contacts">Обратная связь</a></li><li class="item-123"><a href="http://easystm32.ru/links">Ссылки</a></li><li class="item-148"><a href="http://easystm32.ru/?format=feed&type=rss">RSS</a></li></ul>
</div>
    <div id="message">
        
<div id="system-message-container">
</div>
    </div>
            <div id="main-content" class="s-c-s">
            <div id="colmask">
                <div id="colmid">
                    <div id="colright">
                        <div id="col1wrap">
              <div id="col1pad">
                              <div id="col1">
                   
<div class="component"><div class="breadcrumbs-pad">
<script type="text/javascript">
var begun_auto_pad = 353320856;
var begun_block_id = 353320860;
</script>
<script src="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/autocontext2.js" type="text/javascript"></script><script type="text/javascript" src="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/autocontext2_main.e2aade4f48.js"></script><script type="text/javascript" src="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/begun_scripts.3ac79a9a40.js"></script><script type="text/javascript" src="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/begun_utils.4e3ae41527.js"></script><div id="begun_block_353320860" class="begun_auto_rich"><span class="begun_adv_span"><table class="begun_adv begun_adv_hor " style="width:"><tbody><tr><td class="begun_adv_cell"><div class="begun_adv_common"><span class="begun_adv_age">18+</span><table class="begun_adv_table begun_adv_thumb"><tbody><tr><td class="begun_adv_cell begun_adv_rich" style="width:25% !important" onclick="Begun.Autocontext.clickBanner(event, this)" _url="http://click01.begun.ru/click.jsp?url=i4-biczGx8anPyFS5-q23GCSg-ROAtkZbBjWBDydPwA8-gSNn7SngNrJoIb-nPbd2MfZALeP4KfdNDORIm-5OjlAIPh3iA7kRRGglxcAuuTPiDiUZjLqGkBUqxIYqaB7chnsawtEmldgSqCX4O*6HP09uB*dGulGZT15TIOnowaDtFnRoMjO8exZNXCI2vXuEuzI2NXR71EaH84F17VjhmIicaTc*jzYgKZh0Y5JAiqf0JBHNrkgUqjVfpY4uW2SsEluukgAIUbIHP7msDClv*Shj4ZdLShGfqXwOXrWXdatYUvAUFNrJVcxb-vp15regwlNn6T2DmEldwUwbJFovDRdPZd1EbZHrC7X9U4OltymvoY4PtSVbYAeS4NrlX8lqgvDq8xEVsyCtN1xaz7srDCeXbrTQFuV8Ky8uhmX6P*snjTWj2na08vUCwGtWKnwZKZb*Lj4jDf24Z61q3uT7f*EHKnBrIYHUeekx*R8OpqeygSe&amp;eurl%5B%5D=i4-biUhJSEm9lUsywpep3QLiPwdNvqnY0l08cTr7tOy0huYSzZcFDRnJEP4&amp;show_time=1400423149279&amp;mouseover_time=1400423150124&amp;mouseover_count=1" _banner_id="342090278"><div class="begun_adv_image"><a href="http://click01.begun.ru/click.jsp?url=i4-biczGx8anPyFS5-q23GCSg-ROAtkZbBjWBDydPwA8-gSNn7SngNrJoIb-nPbd2MfZALeP4KfdNDORIm-5OjlAIPh3iA7kRRGglxcAuuTPiDiUZjLqGkBUqxIYqaB7chnsawtEmldgSqCX4O*6HP09uB*dGulGZT15TIOnowaDtFnRoMjO8exZNXCI2vXuEuzI2NXR71EaH84F17VjhmIicaTc*jzYgKZh0Y5JAiqf0JBHNrkgUqjVfpY4uW2SsEluukgAIUbIHP7msDClv*Shj4ZdLShGfqXwOXrWXdatYUvAUFNrJVcxb-vp15regwlNn6T2DmEldwUwbJFovDRdPZd1EbZHrC7X9U4OltymvoY4PtSVbYAeS4NrlX8lqgvDq8xEVsyCtN1xaz7srDCeXbrTQFuV8Ky8uhmX6P*snjTWj2na08vUCwGtWKnwZKZb*Lj4jDf24Z61q3uT7f*EHKnBrIYHUeekx*R8OpqeygSe&eurl%5B%5D=i4-biUhJSEm9lUsywpep3QLiPwdNvqnY0l08cTr7tOy0huYSzZcFDRnJEP4&show_time=1400423149279&mouseover_time=1400423150124&mouseover_count=1" class="snap_noshots" target="_blank"><img src="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/3s" _big_photo_src="http://thumbs01.begun.ru/rich_them/1/3b" _small_photo_src="http://thumbs01.begun.ru/rich_them/1/3s" class="begun_adv_picture" alt="" style="height: 70px; width: 70px;"></a></div><div class="begun_adv_block" title="smile-vl.ru"><div class="begun_adv_title"><a class="snap_noshots" target="_blank" href="http://click01.begun.ru/click.jsp?url=i4-biczGx8anPyFS5-q23GCSg-ROAtkZbBjWBDydPwA8-gSNn7SngNrJoIb-nPbd2MfZALeP4KfdNDORIm-5OjlAIPh3iA7kRRGglxcAuuTPiDiUZjLqGkBUqxIYqaB7chnsawtEmldgSqCX4O*6HP09uB*dGulGZT15TIOnowaDtFnRoMjO8exZNXCI2vXuEuzI2NXR71EaH84F17VjhmIicaTc*jzYgKZh0Y5JAiqf0JBHNrkgUqjVfpY4uW2SsEluukgAIUbIHP7msDClv*Shj4ZdLShGfqXwOXrWXdatYUvAUFNrJVcxb-vp15regwlNn6T2DmEldwUwbJFovDRdPZd1EbZHrC7X9U4OltymvoY4PtSVbYAeS4NrlX8lqgvDq8xEVsyCtN1xaz7srDCeXbrTQFuV8Ky8uhmX6P*snjTWj2na08vUCwGtWKnwZKZb*Lj4jDf24Z61q3uT7f*EHKnBrIYHUeekx*R8OpqeygSe&eurl%5B%5D=i4-biUhJSEm9lUsywpep3QLiPwdNvqnY0l08cTr7tOy0huYSzZcFDRnJEP4&show_time=1400423149279&mouseover_time=1400423150124&mouseover_count=1" onmouseover="status=&#39;http://smile-vl.ru/&#39;;return true" onmouseout="status=&#39;&#39;;return true" title="smile-vl.ru">Теперь и на Второй Речке!</a></div><div class="begun_adv_text"><a class="snap_noshots" target="_blank" href="http://click01.begun.ru/click.jsp?url=i4-biczGx8anPyFS5-q23GCSg-ROAtkZbBjWBDydPwA8-gSNn7SngNrJoIb-nPbd2MfZALeP4KfdNDORIm-5OjlAIPh3iA7kRRGglxcAuuTPiDiUZjLqGkBUqxIYqaB7chnsawtEmldgSqCX4O*6HP09uB*dGulGZT15TIOnowaDtFnRoMjO8exZNXCI2vXuEuzI2NXR71EaH84F17VjhmIicaTc*jzYgKZh0Y5JAiqf0JBHNrkgUqjVfpY4uW2SsEluukgAIUbIHP7msDClv*Shj4ZdLShGfqXwOXrWXdatYUvAUFNrJVcxb-vp15regwlNn6T2DmEldwUwbJFovDRdPZd1EbZHrC7X9U4OltymvoY4PtSVbYAeS4NrlX8lqgvDq8xEVsyCtN1xaz7srDCeXbrTQFuV8Ky8uhmX6P*snjTWj2na08vUCwGtWKnwZKZb*Lj4jDf24Z61q3uT7f*EHKnBrIYHUeekx*R8OpqeygSe&eurl%5B%5D=i4-biUhJSEm9lUsywpep3QLiPwdNvqnY0l08cTr7tOy0huYSzZcFDRnJEP4&show_time=1400423149279&mouseover_time=1400423150124&mouseover_count=1" onmouseover="status=&#39;http://smile-vl.ru/&#39;;return true" onmouseout="status=&#39;&#39;;return true" title="smile-vl.ru">Стоматология "Смайл" расширяется, сохраняя традиции качества!</a></div><div class="begun_adv_contact"><span class="begun_adv_contact"><a class="snap_noshots" target="_blank" href="http://click01.begun.ru/click.jsp?url=i4-biczGx8anPyFS5-q23GCSg-ROAtkZbBjWBDydPwA8-gSNn7SngNrJoIb-nPbd2MfZALeP4KfdNDORIm-5OjlAIPh3iA7kRRGglxcAuuTPiDiUZjLqGkBUqxIYqaB7chnsawtEmldgSqCX4O*6HP09uB*dGulGZT15TIOnowaDtFnRoMjO8exZNXCI2vXuEuzI2NXR71EaH84F17VjhmIicaTc*jzYgKZh0Y5JAiqf0JBHNrkgUqjVfpY4uW2SsEluukgAIUbIHP7msDClv*Shj4ZdLShGfqXwOXrWXdatYUvAUFNrJVcxb-vp15regwlNn6T2DmEldwUwbJFovDRdPZd1EbZHrC7X9U4OltymvoY4PtSVbYAeS4NrlX8lqgvDq8xEVsyCtN1xaz7srDCeXbrTQFuV8Ky8uhmX6P*snjTWj2na08vUCwGtWKnwZKZb*Lj4jDf24Z61q3uT7f*EHKnBrIYHUeekx*R8OpqeygSe&eurl%5B%5D=i4-biUhJSEm9lUsywpep3QLiPwdNvqnY0l08cTr7tOy0huYSzZcFDRnJEP4&show_time=1400423149279&mouseover_time=1400423150124&mouseover_count=1" onmouseover="status=&#39;http://smile-vl.ru/&#39;;return true" onmouseout="status=&#39;&#39;;return true" title="smile-vl.ru">smile-vl.ru</a></span> <span class="begun_adv_bullit"> • </span> <span class="begun_adv_city"><a class="snap_noshots" target="_blank" href="http://click01.begun.ru/click.jsp?url=i4-biczGx8anPyFS5-q23GCSg-ROAtkZbBjWBDydPwA8-gSNn7SngNrJoIb-nPbd2MfZALeP4KfdNDORIm-5OjlAIPh3iA7kRRGglxcAuuTPiDiUZjLqGkBUqxIYqaB7chnsawtEmldgSqCX4O*6HP09uB*dGulGZT15TIOnowaDtFnRoMjO8exZNXCI2vXuEuzI2NXR71EaH84F17VjhmIicaTc*jzYgKZh0Y5JAiqf0JBHNrkgUqjVfpY4uW2SsEluukgAIUbIHP7msDClv*Shj4ZdLShGfqXwOXrWXdatYUvAUFNrJVcxb-vp15regwlNn6T2DmEldwUwbJFovDRdPZd1EbZHrC7X9U4OltymvoY4PtSVbYAeS4NrlX8lqgvDq8xEVsyCtN1xaz7srDCeXbrTQFuV8Ky8uhmX6P*snjTWj2na08vUCwGtWKnwZKZb*Lj4jDf24Z61q3uT7f*EHKnBrIYHUeekx*R8OpqeygSe&eurl%5B%5D=i4-biUhJSEm9lUsywpep3QLiPwdNvqnY0l08cTr7tOy0huYSzZcFDRnJEP4&show_time=1400423149279&mouseover_time=1400423150124&mouseover_count=1" onmouseover="status=&#39;http://smile-vl.ru/&#39;;return true" onmouseout="status=&#39;&#39;;return true" title="smile-vl.ru">Владивосток</a></span></div><div class="begun_warn_message begun_warn_medicine"><span class="begun_warn_icon"><i></i></span>Есть противо­показания. Посоветуйтесь с&nbsp;врачом.</div></div></td><td class="begun_adv_cell begun_adv_rich" style="width:25% !important" onclick="Begun.Autocontext.clickBanner(event, this)" _url="http://click01.begun.ru/click.jsp?url=i4-bifL8-fyUTIt0wdyQ*ka0pdJoJP8-Sj7wIjNMr45yLTbE8eWLKfiKYMOPHKoNChXGAUDJ6ziHYFmXIftV7WHyQly1IVp1Ndd08v1IjInsIV860ugWyozxaCpZ6UoAGFVOZAoQZdp8e*xyWSJXfydJa9ulV3*oA3eXkA77dMj2ODAXSQ1o8VgCyhGhyyX72M3EqLS0GcsYXzFKLQIGAE7ePqEq0u0RY0WQgAh8bWPV9sxxTAt7EeOwu3KuFrBZvF9iYHU0zzjpxiCtXO2o5nny5Wno8PCjZ6ovHZLUqDTkOoyB0RXFPVS5BOn3-bsFr3U*ALnxUb7Sf6uNvVa9urlDdwJwYuWHvPR3l1ffI0jEcIRtgKxcxuUBDj1MqNz0N5g3XiWaQ46r2Py2IYJZvQbnlMwUPU4Ho1VO1KDcEkyNoi4Rt-RAByRD8G9cL87dTDhPjbFCx9Ah6-trRsF00mbaIsyUMj57qAZCexK3CpxiS*tMSsoQTsisgZovi5w*Pi5FpMIezZAfhZhQGBAcb0ucz2Nt2f3nOIzrwC91lrhB2NPlITroX5tjj264vVg5y-t1z6d4L8RrNu8C4xQkuowFFAAQXtk6uz9aE1FkiiT*--PZX98ysMGD-UFPe70SP45rrG0GsFTL0KeNk1v9UUhIqzgxvUNz02NqLg&amp;eurl%5B%5D=i4-biS0sLSzbf3HZKXxCNukJ1OzO05ZwDnUWgdi1X9of5yjE&amp;show_time=1400423149279" _banner_id="353088810"><div class="begun_adv_image"><a href="http://click01.begun.ru/click.jsp?url=i4-bifL8-fyUTIt0wdyQ*ka0pdJoJP8-Sj7wIjNMr45yLTbE8eWLKfiKYMOPHKoNChXGAUDJ6ziHYFmXIftV7WHyQly1IVp1Ndd08v1IjInsIV860ugWyozxaCpZ6UoAGFVOZAoQZdp8e*xyWSJXfydJa9ulV3*oA3eXkA77dMj2ODAXSQ1o8VgCyhGhyyX72M3EqLS0GcsYXzFKLQIGAE7ePqEq0u0RY0WQgAh8bWPV9sxxTAt7EeOwu3KuFrBZvF9iYHU0zzjpxiCtXO2o5nny5Wno8PCjZ6ovHZLUqDTkOoyB0RXFPVS5BOn3-bsFr3U*ALnxUb7Sf6uNvVa9urlDdwJwYuWHvPR3l1ffI0jEcIRtgKxcxuUBDj1MqNz0N5g3XiWaQ46r2Py2IYJZvQbnlMwUPU4Ho1VO1KDcEkyNoi4Rt-RAByRD8G9cL87dTDhPjbFCx9Ah6-trRsF00mbaIsyUMj57qAZCexK3CpxiS*tMSsoQTsisgZovi5w*Pi5FpMIezZAfhZhQGBAcb0ucz2Nt2f3nOIzrwC91lrhB2NPlITroX5tjj264vVg5y-t1z6d4L8RrNu8C4xQkuowFFAAQXtk6uz9aE1FkiiT*--PZX98ysMGD-UFPe70SP45rrG0GsFTL0KeNk1v9UUhIqzgxvUNz02NqLg&eurl%5B%5D=i4-biS0sLSzbf3HZKXxCNukJ1OzO05ZwDnUWgdi1X9of5yjE&show_time=1400423149279" class="snap_noshots" target="_blank"><img src="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/353088810s" _big_photo_src="http://thumbs01.begun.ru/rich/1/0/353088810b" _small_photo_src="http://thumbs01.begun.ru/rich/1/0/353088810s" class="begun_adv_picture" alt="" style="height: 70px; width: 70px;"></a></div><div class="begun_adv_block" title="polisorb.ru"><div class="begun_adv_title"><a class="snap_noshots" target="_blank" href="http://click01.begun.ru/click.jsp?url=i4-bifL8-fyUTIt0wdyQ*ka0pdJoJP8-Sj7wIjNMr45yLTbE8eWLKfiKYMOPHKoNChXGAUDJ6ziHYFmXIftV7WHyQly1IVp1Ndd08v1IjInsIV860ugWyozxaCpZ6UoAGFVOZAoQZdp8e*xyWSJXfydJa9ulV3*oA3eXkA77dMj2ODAXSQ1o8VgCyhGhyyX72M3EqLS0GcsYXzFKLQIGAE7ePqEq0u0RY0WQgAh8bWPV9sxxTAt7EeOwu3KuFrBZvF9iYHU0zzjpxiCtXO2o5nny5Wno8PCjZ6ovHZLUqDTkOoyB0RXFPVS5BOn3-bsFr3U*ALnxUb7Sf6uNvVa9urlDdwJwYuWHvPR3l1ffI0jEcIRtgKxcxuUBDj1MqNz0N5g3XiWaQ46r2Py2IYJZvQbnlMwUPU4Ho1VO1KDcEkyNoi4Rt-RAByRD8G9cL87dTDhPjbFCx9Ah6-trRsF00mbaIsyUMj57qAZCexK3CpxiS*tMSsoQTsisgZovi5w*Pi5FpMIezZAfhZhQGBAcb0ucz2Nt2f3nOIzrwC91lrhB2NPlITroX5tjj264vVg5y-t1z6d4L8RrNu8C4xQkuowFFAAQXtk6uz9aE1FkiiT*--PZX98ysMGD-UFPe70SP45rrG0GsFTL0KeNk1v9UUhIqzgxvUNz02NqLg&eurl%5B%5D=i4-biS0sLSzbf3HZKXxCNukJ1OzO05ZwDnUWgdi1X9of5yjE&show_time=1400423149279" onmouseover="status=&#39;http://polisorb.ru/&#39;;return true" onmouseout="status=&#39;&#39;;return true" title="polisorb.ru">Лечение диареи у детей</a></div><div class="begun_adv_text"><a class="snap_noshots" target="_blank" href="http://click01.begun.ru/click.jsp?url=i4-bifL8-fyUTIt0wdyQ*ka0pdJoJP8-Sj7wIjNMr45yLTbE8eWLKfiKYMOPHKoNChXGAUDJ6ziHYFmXIftV7WHyQly1IVp1Ndd08v1IjInsIV860ugWyozxaCpZ6UoAGFVOZAoQZdp8e*xyWSJXfydJa9ulV3*oA3eXkA77dMj2ODAXSQ1o8VgCyhGhyyX72M3EqLS0GcsYXzFKLQIGAE7ePqEq0u0RY0WQgAh8bWPV9sxxTAt7EeOwu3KuFrBZvF9iYHU0zzjpxiCtXO2o5nny5Wno8PCjZ6ovHZLUqDTkOoyB0RXFPVS5BOn3-bsFr3U*ALnxUb7Sf6uNvVa9urlDdwJwYuWHvPR3l1ffI0jEcIRtgKxcxuUBDj1MqNz0N5g3XiWaQ46r2Py2IYJZvQbnlMwUPU4Ho1VO1KDcEkyNoi4Rt-RAByRD8G9cL87dTDhPjbFCx9Ah6-trRsF00mbaIsyUMj57qAZCexK3CpxiS*tMSsoQTsisgZovi5w*Pi5FpMIezZAfhZhQGBAcb0ucz2Nt2f3nOIzrwC91lrhB2NPlITroX5tjj264vVg5y-t1z6d4L8RrNu8C4xQkuowFFAAQXtk6uz9aE1FkiiT*--PZX98ysMGD-UFPe70SP45rrG0GsFTL0KeNk1v9UUhIqzgxvUNz02NqLg&eurl%5B%5D=i4-biS0sLSzbf3HZKXxCNukJ1OzO05ZwDnUWgdi1X9of5yjE&show_time=1400423149279" onmouseover="status=&#39;http://polisorb.ru/&#39;;return true" onmouseout="status=&#39;&#39;;return true" title="polisorb.ru">Полисорб МП - устраняет причину диареи! Эффективное лечение.</a></div><div class="begun_adv_contact"><span class="begun_adv_contact"><a class="snap_noshots" target="_blank" href="http://click01.begun.ru/click.jsp?url=i4-bifL8-fyUTIt0wdyQ*ka0pdJoJP8-Sj7wIjNMr45yLTbE8eWLKfiKYMOPHKoNChXGAUDJ6ziHYFmXIftV7WHyQly1IVp1Ndd08v1IjInsIV860ugWyozxaCpZ6UoAGFVOZAoQZdp8e*xyWSJXfydJa9ulV3*oA3eXkA77dMj2ODAXSQ1o8VgCyhGhyyX72M3EqLS0GcsYXzFKLQIGAE7ePqEq0u0RY0WQgAh8bWPV9sxxTAt7EeOwu3KuFrBZvF9iYHU0zzjpxiCtXO2o5nny5Wno8PCjZ6ovHZLUqDTkOoyB0RXFPVS5BOn3-bsFr3U*ALnxUb7Sf6uNvVa9urlDdwJwYuWHvPR3l1ffI0jEcIRtgKxcxuUBDj1MqNz0N5g3XiWaQ46r2Py2IYJZvQbnlMwUPU4Ho1VO1KDcEkyNoi4Rt-RAByRD8G9cL87dTDhPjbFCx9Ah6-trRsF00mbaIsyUMj57qAZCexK3CpxiS*tMSsoQTsisgZovi5w*Pi5FpMIezZAfhZhQGBAcb0ucz2Nt2f3nOIzrwC91lrhB2NPlITroX5tjj264vVg5y-t1z6d4L8RrNu8C4xQkuowFFAAQXtk6uz9aE1FkiiT*--PZX98ysMGD-UFPe70SP45rrG0GsFTL0KeNk1v9UUhIqzgxvUNz02NqLg&eurl%5B%5D=i4-biS0sLSzbf3HZKXxCNukJ1OzO05ZwDnUWgdi1X9of5yjE&show_time=1400423149279" onmouseover="status=&#39;http://polisorb.ru/&#39;;return true" onmouseout="status=&#39;&#39;;return true" title="polisorb.ru">polisorb.ru</a></span> <span class="begun_adv_bullit"> • </span> <span class="begun_adv_city"><a class="snap_noshots" target="_blank" href="http://click01.begun.ru/click.jsp?url=i4-bifL8-fyUTIt0wdyQ*ka0pdJoJP8-Sj7wIjNMr45yLTbE8eWLKfiKYMOPHKoNChXGAUDJ6ziHYFmXIftV7WHyQly1IVp1Ndd08v1IjInsIV860ugWyozxaCpZ6UoAGFVOZAoQZdp8e*xyWSJXfydJa9ulV3*oA3eXkA77dMj2ODAXSQ1o8VgCyhGhyyX72M3EqLS0GcsYXzFKLQIGAE7ePqEq0u0RY0WQgAh8bWPV9sxxTAt7EeOwu3KuFrBZvF9iYHU0zzjpxiCtXO2o5nny5Wno8PCjZ6ovHZLUqDTkOoyB0RXFPVS5BOn3-bsFr3U*ALnxUb7Sf6uNvVa9urlDdwJwYuWHvPR3l1ffI0jEcIRtgKxcxuUBDj1MqNz0N5g3XiWaQ46r2Py2IYJZvQbnlMwUPU4Ho1VO1KDcEkyNoi4Rt-RAByRD8G9cL87dTDhPjbFCx9Ah6-trRsF00mbaIsyUMj57qAZCexK3CpxiS*tMSsoQTsisgZovi5w*Pi5FpMIezZAfhZhQGBAcb0ucz2Nt2f3nOIzrwC91lrhB2NPlITroX5tjj264vVg5y-t1z6d4L8RrNu8C4xQkuowFFAAQXtk6uz9aE1FkiiT*--PZX98ysMGD-UFPe70SP45rrG0GsFTL0KeNk1v9UUhIqzgxvUNz02NqLg&eurl%5B%5D=i4-biS0sLSzbf3HZKXxCNukJ1OzO05ZwDnUWgdi1X9of5yjE&show_time=1400423149279" onmouseover="status=&#39;http://polisorb.ru/&#39;;return true" onmouseout="status=&#39;&#39;;return true" title="polisorb.ru">Владивосток</a></span></div><div class="begun_warn_message begun_warn_medicine,googleacademic,googlecounterfeit,googlecopyright,googlefakedocuments,googlefireworks"><span class="begun_warn_icon"><i></i></span></div></div></td><td class="begun_adv_cell begun_adv_rich" style="width:25% !important" onclick="Begun.Autocontext.clickBanner(event, this)" _url="http://click01.begun.ru/click.jsp?url=i4-biQsZGBmYNOM1gJ3Ruwf15JMpZb5*C3*xYyKxBAQJ7b4aG2si6PRYQQmhGoXw38sNCsdUAkipI2t5IHWyNjEuMZLWkFXMYUj*qW0K0RfrF1g75pzOVhnIbD5aL5NuG3jkkwhwdx*T4gG-XLHPt3OIA4VAXUl8GhGqfgGS8wkeTgR4hGSHgKySlPND3oOhtjZOPLllS3pIEEW3itR*Ja-RR5S5gR4anC1q3RBks20rFfrwwHAxxL7BJrOxLVdXG5K8rxuDxg-DEP3XLI0t1aqqzYZAHHr*s7MvLZJjoC0nKkuAEnq3ORG3EJAY1cpRvE6uUcXgC7GCiMCArNuhQ8P2eDhiJ1-qqDxdQOn8ntuU2KYoSZu*ZtFBjYCa9vpFhBawmhUpmpK-9YAHKSP6*jOMmTn5LSye8xxUy9TKVtRQKRxNgszWfz*jIRVN56qDEirkPjYUdS2QS9-7kxtgcFm4gQJHIOpQJ21*w99adpsIid*ggzMGeviQ7Wcjtp7yLRmMq6uoREKGdUH8hy6w42940*QZMt*0CzZziKmThv32Vy8LnueJroLFHna*Z9tG4C-V5Igu2jjjrQA6Y9JqHRZhXMolxw4i*jzTj-FBAOCtOW2tPmn1G4jmsAv7jrThKxs6DkibdnLeCdeSjWRxUZs4-0WmS*QlQ4uMZ3kIVO*HkfJRs9g6gL04Qh1AjfggcBT*7jEL0yVKb5G1AViv7TM28YCjHq7r4vyDbyNHyQ5EmTFKAhMM-*GfE0F2hbIS2phPqhpxBt-VYWjlq6c7gXi**Nu08DokQciKeW2nvINLYRaTL7KNbsc1ySphDKhq1MMVOQ6X9Av0xVffG3lA5*49AUY&amp;eurl%5B%5D=i4-biU1MTUzE1XQF9aCe6jXVCDB6iZ7v5WoLRs3zFE113vbtj-ULSFXxv88&amp;show_time=1400423149279" _banner_id="257544908"><div class="begun_adv_image"><a href="http://click01.begun.ru/click.jsp?url=i4-biQsZGBmYNOM1gJ3Ruwf15JMpZb5*C3*xYyKxBAQJ7b4aG2si6PRYQQmhGoXw38sNCsdUAkipI2t5IHWyNjEuMZLWkFXMYUj*qW0K0RfrF1g75pzOVhnIbD5aL5NuG3jkkwhwdx*T4gG-XLHPt3OIA4VAXUl8GhGqfgGS8wkeTgR4hGSHgKySlPND3oOhtjZOPLllS3pIEEW3itR*Ja-RR5S5gR4anC1q3RBks20rFfrwwHAxxL7BJrOxLVdXG5K8rxuDxg-DEP3XLI0t1aqqzYZAHHr*s7MvLZJjoC0nKkuAEnq3ORG3EJAY1cpRvE6uUcXgC7GCiMCArNuhQ8P2eDhiJ1-qqDxdQOn8ntuU2KYoSZu*ZtFBjYCa9vpFhBawmhUpmpK-9YAHKSP6*jOMmTn5LSye8xxUy9TKVtRQKRxNgszWfz*jIRVN56qDEirkPjYUdS2QS9-7kxtgcFm4gQJHIOpQJ21*w99adpsIid*ggzMGeviQ7Wcjtp7yLRmMq6uoREKGdUH8hy6w42940*QZMt*0CzZziKmThv32Vy8LnueJroLFHna*Z9tG4C-V5Igu2jjjrQA6Y9JqHRZhXMolxw4i*jzTj-FBAOCtOW2tPmn1G4jmsAv7jrThKxs6DkibdnLeCdeSjWRxUZs4-0WmS*QlQ4uMZ3kIVO*HkfJRs9g6gL04Qh1AjfggcBT*7jEL0yVKb5G1AViv7TM28YCjHq7r4vyDbyNHyQ5EmTFKAhMM-*GfE0F2hbIS2phPqhpxBt-VYWjlq6c7gXi**Nu08DokQciKeW2nvINLYRaTL7KNbsc1ySphDKhq1MMVOQ6X9Av0xVffG3lA5*49AUY&eurl%5B%5D=i4-biU1MTUzE1XQF9aCe6jXVCDB6iZ7v5WoLRs3zFE113vbtj-ULSFXxv88&show_time=1400423149279" class="snap_noshots" target="_blank"><img src="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/8s" _big_photo_src="http://thumbs01.begun.ru/rich_them/1/8b" _small_photo_src="http://thumbs01.begun.ru/rich_them/1/8s" class="begun_adv_picture" alt="" style="height: 70px; width: 70px;"></a></div><div class="begun_adv_block" title="rostechnocom.com"><div class="begun_adv_title"><a class="snap_noshots" target="_blank" href="http://click01.begun.ru/click.jsp?url=i4-biQsZGBmYNOM1gJ3Ruwf15JMpZb5*C3*xYyKxBAQJ7b4aG2si6PRYQQmhGoXw38sNCsdUAkipI2t5IHWyNjEuMZLWkFXMYUj*qW0K0RfrF1g75pzOVhnIbD5aL5NuG3jkkwhwdx*T4gG-XLHPt3OIA4VAXUl8GhGqfgGS8wkeTgR4hGSHgKySlPND3oOhtjZOPLllS3pIEEW3itR*Ja-RR5S5gR4anC1q3RBks20rFfrwwHAxxL7BJrOxLVdXG5K8rxuDxg-DEP3XLI0t1aqqzYZAHHr*s7MvLZJjoC0nKkuAEnq3ORG3EJAY1cpRvE6uUcXgC7GCiMCArNuhQ8P2eDhiJ1-qqDxdQOn8ntuU2KYoSZu*ZtFBjYCa9vpFhBawmhUpmpK-9YAHKSP6*jOMmTn5LSye8xxUy9TKVtRQKRxNgszWfz*jIRVN56qDEirkPjYUdS2QS9-7kxtgcFm4gQJHIOpQJ21*w99adpsIid*ggzMGeviQ7Wcjtp7yLRmMq6uoREKGdUH8hy6w42940*QZMt*0CzZziKmThv32Vy8LnueJroLFHna*Z9tG4C-V5Igu2jjjrQA6Y9JqHRZhXMolxw4i*jzTj-FBAOCtOW2tPmn1G4jmsAv7jrThKxs6DkibdnLeCdeSjWRxUZs4-0WmS*QlQ4uMZ3kIVO*HkfJRs9g6gL04Qh1AjfggcBT*7jEL0yVKb5G1AViv7TM28YCjHq7r4vyDbyNHyQ5EmTFKAhMM-*GfE0F2hbIS2phPqhpxBt-VYWjlq6c7gXi**Nu08DokQciKeW2nvINLYRaTL7KNbsc1ySphDKhq1MMVOQ6X9Av0xVffG3lA5*49AUY&eurl%5B%5D=i4-biU1MTUzE1XQF9aCe6jXVCDB6iZ7v5WoLRs3zFE113vbtj-ULSFXxv88&show_time=1400423149279" onmouseover="status=&#39;http://rostechnocom.com/&#39;;return true" onmouseout="status=&#39;&#39;;return true" title="rostechnocom.com">Осциллограф</a></div><div class="begun_adv_text"><a class="snap_noshots" target="_blank" href="http://click01.begun.ru/click.jsp?url=i4-biQsZGBmYNOM1gJ3Ruwf15JMpZb5*C3*xYyKxBAQJ7b4aG2si6PRYQQmhGoXw38sNCsdUAkipI2t5IHWyNjEuMZLWkFXMYUj*qW0K0RfrF1g75pzOVhnIbD5aL5NuG3jkkwhwdx*T4gG-XLHPt3OIA4VAXUl8GhGqfgGS8wkeTgR4hGSHgKySlPND3oOhtjZOPLllS3pIEEW3itR*Ja-RR5S5gR4anC1q3RBks20rFfrwwHAxxL7BJrOxLVdXG5K8rxuDxg-DEP3XLI0t1aqqzYZAHHr*s7MvLZJjoC0nKkuAEnq3ORG3EJAY1cpRvE6uUcXgC7GCiMCArNuhQ8P2eDhiJ1-qqDxdQOn8ntuU2KYoSZu*ZtFBjYCa9vpFhBawmhUpmpK-9YAHKSP6*jOMmTn5LSye8xxUy9TKVtRQKRxNgszWfz*jIRVN56qDEirkPjYUdS2QS9-7kxtgcFm4gQJHIOpQJ21*w99adpsIid*ggzMGeviQ7Wcjtp7yLRmMq6uoREKGdUH8hy6w42940*QZMt*0CzZziKmThv32Vy8LnueJroLFHna*Z9tG4C-V5Igu2jjjrQA6Y9JqHRZhXMolxw4i*jzTj-FBAOCtOW2tPmn1G4jmsAv7jrThKxs6DkibdnLeCdeSjWRxUZs4-0WmS*QlQ4uMZ3kIVO*HkfJRs9g6gL04Qh1AjfggcBT*7jEL0yVKb5G1AViv7TM28YCjHq7r4vyDbyNHyQ5EmTFKAhMM-*GfE0F2hbIS2phPqhpxBt-VYWjlq6c7gXi**Nu08DokQciKeW2nvINLYRaTL7KNbsc1ySphDKhq1MMVOQ6X9Av0xVffG3lA5*49AUY&eurl%5B%5D=i4-biU1MTUzE1XQF9aCe6jXVCDB6iZ7v5WoLRs3zFE113vbtj-ULSFXxv88&show_time=1400423149279" onmouseover="status=&#39;http://rostechnocom.com/&#39;;return true" onmouseout="status=&#39;&#39;;return true" title="rostechnocom.com">Доставка оборудования по России и СНГ. Действуют скидки. Звоните!</a></div><div class="begun_adv_contact"><span class="begun_adv_contact"><a class="snap_noshots" target="_blank" href="http://click01.begun.ru/click.jsp?url=i4-biQsZGBmYNOM1gJ3Ruwf15JMpZb5*C3*xYyKxBAQJ7b4aG2si6PRYQQmhGoXw38sNCsdUAkipI2t5IHWyNjEuMZLWkFXMYUj*qW0K0RfrF1g75pzOVhnIbD5aL5NuG3jkkwhwdx*T4gG-XLHPt3OIA4VAXUl8GhGqfgGS8wkeTgR4hGSHgKySlPND3oOhtjZOPLllS3pIEEW3itR*Ja-RR5S5gR4anC1q3RBks20rFfrwwHAxxL7BJrOxLVdXG5K8rxuDxg-DEP3XLI0t1aqqzYZAHHr*s7MvLZJjoC0nKkuAEnq3ORG3EJAY1cpRvE6uUcXgC7GCiMCArNuhQ8P2eDhiJ1-qqDxdQOn8ntuU2KYoSZu*ZtFBjYCa9vpFhBawmhUpmpK-9YAHKSP6*jOMmTn5LSye8xxUy9TKVtRQKRxNgszWfz*jIRVN56qDEirkPjYUdS2QS9-7kxtgcFm4gQJHIOpQJ21*w99adpsIid*ggzMGeviQ7Wcjtp7yLRmMq6uoREKGdUH8hy6w42940*QZMt*0CzZziKmThv32Vy8LnueJroLFHna*Z9tG4C-V5Igu2jjjrQA6Y9JqHRZhXMolxw4i*jzTj-FBAOCtOW2tPmn1G4jmsAv7jrThKxs6DkibdnLeCdeSjWRxUZs4-0WmS*QlQ4uMZ3kIVO*HkfJRs9g6gL04Qh1AjfggcBT*7jEL0yVKb5G1AViv7TM28YCjHq7r4vyDbyNHyQ5EmTFKAhMM-*GfE0F2hbIS2phPqhpxBt-VYWjlq6c7gXi**Nu08DokQciKeW2nvINLYRaTL7KNbsc1ySphDKhq1MMVOQ6X9Av0xVffG3lA5*49AUY&eurl%5B%5D=i4-biU1MTUzE1XQF9aCe6jXVCDB6iZ7v5WoLRs3zFE113vbtj-ULSFXxv88&show_time=1400423149279" onmouseover="status=&#39;http://rostechnocom.com/&#39;;return true" onmouseout="status=&#39;&#39;;return true" title="rostechnocom.com">rostechnocom.com</a></span> <span class="begun_adv_bullit"> • </span> <span class="begun_adv_city"><a class="snap_noshots" target="_blank" href="http://click01.begun.ru/click.jsp?url=i4-biQsZGBmYNOM1gJ3Ruwf15JMpZb5*C3*xYyKxBAQJ7b4aG2si6PRYQQmhGoXw38sNCsdUAkipI2t5IHWyNjEuMZLWkFXMYUj*qW0K0RfrF1g75pzOVhnIbD5aL5NuG3jkkwhwdx*T4gG-XLHPt3OIA4VAXUl8GhGqfgGS8wkeTgR4hGSHgKySlPND3oOhtjZOPLllS3pIEEW3itR*Ja-RR5S5gR4anC1q3RBks20rFfrwwHAxxL7BJrOxLVdXG5K8rxuDxg-DEP3XLI0t1aqqzYZAHHr*s7MvLZJjoC0nKkuAEnq3ORG3EJAY1cpRvE6uUcXgC7GCiMCArNuhQ8P2eDhiJ1-qqDxdQOn8ntuU2KYoSZu*ZtFBjYCa9vpFhBawmhUpmpK-9YAHKSP6*jOMmTn5LSye8xxUy9TKVtRQKRxNgszWfz*jIRVN56qDEirkPjYUdS2QS9-7kxtgcFm4gQJHIOpQJ21*w99adpsIid*ggzMGeviQ7Wcjtp7yLRmMq6uoREKGdUH8hy6w42940*QZMt*0CzZziKmThv32Vy8LnueJroLFHna*Z9tG4C-V5Igu2jjjrQA6Y9JqHRZhXMolxw4i*jzTj-FBAOCtOW2tPmn1G4jmsAv7jrThKxs6DkibdnLeCdeSjWRxUZs4-0WmS*QlQ4uMZ3kIVO*HkfJRs9g6gL04Qh1AjfggcBT*7jEL0yVKb5G1AViv7TM28YCjHq7r4vyDbyNHyQ5EmTFKAhMM-*GfE0F2hbIS2phPqhpxBt-VYWjlq6c7gXi**Nu08DokQciKeW2nvINLYRaTL7KNbsc1ySphDKhq1MMVOQ6X9Av0xVffG3lA5*49AUY&eurl%5B%5D=i4-biU1MTUzE1XQF9aCe6jXVCDB6iZ7v5WoLRs3zFE113vbtj-ULSFXxv88&show_time=1400423149279" onmouseover="status=&#39;http://rostechnocom.com/&#39;;return true" onmouseout="status=&#39;&#39;;return true" title="rostechnocom.com">Владивосток</a></span></div></div></td><td class="begun_adv_cell begun_adv_rich" style="width:25% !important" onclick="Begun.Autocontext.clickBanner(event, this)" _url="http://click01.begun.ru/click.jsp?url=i4-biW5jYmP9AttB9Omlz3OBkOddEcoKfwvFF2DjQnYX*-PtrerGcgrtGzC9qUMqjVUiZV3oGDFEJiJY95B7P*wUJZNZD91GST24A7NGJBCs-vwhfGl1ymXdlyla-sUg1iG9wW9KeEGLpPJVb0zZ5B0W*qYdADLubXRnV4xXxyReY-rOyMqJsr66a6LAj1LU5CIfpIC2gSPEmZrUYlyP9G*jcTeQUKQ0AXODZhLptMnsU3jIqbfo0fn*nIvB2VMuTj8Qetv4pkfudIt4AaaLWspt2umtm8ZSjTTX93-vpBpl8Q80CTD92CeBqKM7ch70E9rskkkpf*IQ61XhaIgZW9dSZ42xNbV9VO0-9OYlL5WVRI9zmx*MgUiJGJUlogMqwHiaaMoNw2GLzwrNxJKpfHYDLvT6daPOdQFr8S*WjUcHa-JLIF50PfYbIz858KN4naQfCd1q7emK9Q2QmjKOCa2wCZtAhPCJK9mhhW1IOIjsRALeisFC6-D3Sv1Yjk1i*HIxVvevPdKnUF4jJ4L1gYrAsgs9SB8S3zlJGHc8rkCRqtKMud-MYVj9QSY&amp;eurl%5B%5D=i4-biRMSExL994AS4reJ-SLCHyfjBpsYOXQH-RrJuDyOY*r3&amp;show_time=1400423149279" _banner_id="345039496"><div class="begun_adv_image"><a href="http://click01.begun.ru/click.jsp?url=i4-biW5jYmP9AttB9Omlz3OBkOddEcoKfwvFF2DjQnYX*-PtrerGcgrtGzC9qUMqjVUiZV3oGDFEJiJY95B7P*wUJZNZD91GST24A7NGJBCs-vwhfGl1ymXdlyla-sUg1iG9wW9KeEGLpPJVb0zZ5B0W*qYdADLubXRnV4xXxyReY-rOyMqJsr66a6LAj1LU5CIfpIC2gSPEmZrUYlyP9G*jcTeQUKQ0AXODZhLptMnsU3jIqbfo0fn*nIvB2VMuTj8Qetv4pkfudIt4AaaLWspt2umtm8ZSjTTX93-vpBpl8Q80CTD92CeBqKM7ch70E9rskkkpf*IQ61XhaIgZW9dSZ42xNbV9VO0-9OYlL5WVRI9zmx*MgUiJGJUlogMqwHiaaMoNw2GLzwrNxJKpfHYDLvT6daPOdQFr8S*WjUcHa-JLIF50PfYbIz858KN4naQfCd1q7emK9Q2QmjKOCa2wCZtAhPCJK9mhhW1IOIjsRALeisFC6-D3Sv1Yjk1i*HIxVvevPdKnUF4jJ4L1gYrAsgs9SB8S3zlJGHc8rkCRqtKMud-MYVj9QSY&eurl%5B%5D=i4-biRMSExL994AS4reJ-SLCHyfjBpsYOXQH-RrJuDyOY*r3&show_time=1400423149279" class="snap_noshots" target="_blank"><img src="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/345039496s" _big_photo_src="http://thumbs01.begun.ru/rich/9/6/345039496b" _small_photo_src="http://thumbs01.begun.ru/rich/9/6/345039496s" class="begun_adv_picture" alt="" style="height: 70px; width: 70px;"></a></div><div class="begun_adv_block" title="здорово-живешь.рф"><div class="begun_adv_title"><a class="snap_noshots" target="_blank" href="http://click01.begun.ru/click.jsp?url=i4-biW5jYmP9AttB9Omlz3OBkOddEcoKfwvFF2DjQnYX*-PtrerGcgrtGzC9qUMqjVUiZV3oGDFEJiJY95B7P*wUJZNZD91GST24A7NGJBCs-vwhfGl1ymXdlyla-sUg1iG9wW9KeEGLpPJVb0zZ5B0W*qYdADLubXRnV4xXxyReY-rOyMqJsr66a6LAj1LU5CIfpIC2gSPEmZrUYlyP9G*jcTeQUKQ0AXODZhLptMnsU3jIqbfo0fn*nIvB2VMuTj8Qetv4pkfudIt4AaaLWspt2umtm8ZSjTTX93-vpBpl8Q80CTD92CeBqKM7ch70E9rskkkpf*IQ61XhaIgZW9dSZ42xNbV9VO0-9OYlL5WVRI9zmx*MgUiJGJUlogMqwHiaaMoNw2GLzwrNxJKpfHYDLvT6daPOdQFr8S*WjUcHa-JLIF50PfYbIz858KN4naQfCd1q7emK9Q2QmjKOCa2wCZtAhPCJK9mhhW1IOIjsRALeisFC6-D3Sv1Yjk1i*HIxVvevPdKnUF4jJ4L1gYrAsgs9SB8S3zlJGHc8rkCRqtKMud-MYVj9QSY&eurl%5B%5D=i4-biRMSExL994AS4reJ-SLCHyfjBpsYOXQH-RrJuDyOY*r3&show_time=1400423149279" onmouseover="status=&#39;http://здорово-живешь.рф/&#39;;return true" onmouseout="status=&#39;&#39;;return true" title="здорово-живешь.рф">Спортивное питание?</a></div><div class="begun_adv_text"><a class="snap_noshots" target="_blank" href="http://click01.begun.ru/click.jsp?url=i4-biW5jYmP9AttB9Omlz3OBkOddEcoKfwvFF2DjQnYX*-PtrerGcgrtGzC9qUMqjVUiZV3oGDFEJiJY95B7P*wUJZNZD91GST24A7NGJBCs-vwhfGl1ymXdlyla-sUg1iG9wW9KeEGLpPJVb0zZ5B0W*qYdADLubXRnV4xXxyReY-rOyMqJsr66a6LAj1LU5CIfpIC2gSPEmZrUYlyP9G*jcTeQUKQ0AXODZhLptMnsU3jIqbfo0fn*nIvB2VMuTj8Qetv4pkfudIt4AaaLWspt2umtm8ZSjTTX93-vpBpl8Q80CTD92CeBqKM7ch70E9rskkkpf*IQ61XhaIgZW9dSZ42xNbV9VO0-9OYlL5WVRI9zmx*MgUiJGJUlogMqwHiaaMoNw2GLzwrNxJKpfHYDLvT6daPOdQFr8S*WjUcHa-JLIF50PfYbIz858KN4naQfCd1q7emK9Q2QmjKOCa2wCZtAhPCJK9mhhW1IOIjsRALeisFC6-D3Sv1Yjk1i*HIxVvevPdKnUF4jJ4L1gYrAsgs9SB8S3zlJGHc8rkCRqtKMud-MYVj9QSY&eurl%5B%5D=i4-biRMSExL994AS4reJ-SLCHyfjBpsYOXQH-RrJuDyOY*r3&show_time=1400423149279" onmouseover="status=&#39;http://здорово-живешь.рф/&#39;;return true" onmouseout="status=&#39;&#39;;return true" title="здорово-живешь.рф">Отличные производители и доступные цены. Скидки до 15% для клиентов!</a></div><div class="begun_adv_contact"><span class="begun_adv_contact"><a class="snap_noshots" target="_blank" href="http://click01.begun.ru/click.jsp?url=i4-biW5jYmP9AttB9Omlz3OBkOddEcoKfwvFF2DjQnYX*-PtrerGcgrtGzC9qUMqjVUiZV3oGDFEJiJY95B7P*wUJZNZD91GST24A7NGJBCs-vwhfGl1ymXdlyla-sUg1iG9wW9KeEGLpPJVb0zZ5B0W*qYdADLubXRnV4xXxyReY-rOyMqJsr66a6LAj1LU5CIfpIC2gSPEmZrUYlyP9G*jcTeQUKQ0AXODZhLptMnsU3jIqbfo0fn*nIvB2VMuTj8Qetv4pkfudIt4AaaLWspt2umtm8ZSjTTX93-vpBpl8Q80CTD92CeBqKM7ch70E9rskkkpf*IQ61XhaIgZW9dSZ42xNbV9VO0-9OYlL5WVRI9zmx*MgUiJGJUlogMqwHiaaMoNw2GLzwrNxJKpfHYDLvT6daPOdQFr8S*WjUcHa-JLIF50PfYbIz858KN4naQfCd1q7emK9Q2QmjKOCa2wCZtAhPCJK9mhhW1IOIjsRALeisFC6-D3Sv1Yjk1i*HIxVvevPdKnUF4jJ4L1gYrAsgs9SB8S3zlJGHc8rkCRqtKMud-MYVj9QSY&eurl%5B%5D=i4-biRMSExL994AS4reJ-SLCHyfjBpsYOXQH-RrJuDyOY*r3&show_time=1400423149279" onmouseover="status=&#39;http://здорово-живешь.рф/&#39;;return true" onmouseout="status=&#39;&#39;;return true" title="здорово-живешь.рф">здорово-живешь.рф</a></span> <span class="begun_adv_bullit"> • </span> <span class="begun_adv_city"><a class="snap_noshots" target="_blank" href="http://click01.begun.ru/click.jsp?url=i4-biW5jYmP9AttB9Omlz3OBkOddEcoKfwvFF2DjQnYX*-PtrerGcgrtGzC9qUMqjVUiZV3oGDFEJiJY95B7P*wUJZNZD91GST24A7NGJBCs-vwhfGl1ymXdlyla-sUg1iG9wW9KeEGLpPJVb0zZ5B0W*qYdADLubXRnV4xXxyReY-rOyMqJsr66a6LAj1LU5CIfpIC2gSPEmZrUYlyP9G*jcTeQUKQ0AXODZhLptMnsU3jIqbfo0fn*nIvB2VMuTj8Qetv4pkfudIt4AaaLWspt2umtm8ZSjTTX93-vpBpl8Q80CTD92CeBqKM7ch70E9rskkkpf*IQ61XhaIgZW9dSZ42xNbV9VO0-9OYlL5WVRI9zmx*MgUiJGJUlogMqwHiaaMoNw2GLzwrNxJKpfHYDLvT6daPOdQFr8S*WjUcHa-JLIF50PfYbIz858KN4naQfCd1q7emK9Q2QmjKOCa2wCZtAhPCJK9mhhW1IOIjsRALeisFC6-D3Sv1Yjk1i*HIxVvevPdKnUF4jJ4L1gYrAsgs9SB8S3zlJGHc8rkCRqtKMud-MYVj9QSY&eurl%5B%5D=i4-biRMSExL994AS4reJ-SLCHyfjBpsYOXQH-RrJuDyOY*r3&show_time=1400423149279" onmouseover="status=&#39;http://здорово-живешь.рф/&#39;;return true" onmouseout="status=&#39;&#39;;return true" title="здорово-живешь.рф">Владивосток</a></span></div></div></td></tr></tbody></table><a class="begun_adv_sys_logo snap_noshots" href="http://www.begun.ru/?utm_source=begun_network&utm_medium=logo&utm_campaign=text_blocks" target="_blank" style="display:"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAQCAYAAABKkhw/AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA8VJREFUeNrkl1loE1EUhs8k6R63ulSt4tKKVcGNuvvgQgU3FB8UEVEEURBBcUHxQX3wQSuoIGpdUKpYBHeoiLigolZapEpbqEUpxbZujVqjRGsS/9P+KTcxwmj6UOiBL5PcuTNz/3v+e+7ECgaD0pHCZVlWZxwTwEfQrtQnZohk5olYOrBAa/NYjPIxx/zP4QBHQR1Iam/Z8L0SaXwIwfFhzZqUpv+9pwp2aqb1/kBvnfyXvtovhX2jhV7rlpaERD7DinKvyLbkaFn7eAEfgSi9bcTPwJ+W1cH4yV7wCDwD+c3WobPAOnALlIM7YBPFa6SCXQC5kApwBazguQHgMlhqPDMbXAcz+HsKOAVegCfgABgU6vy9UsRzAzOUYk+kCvTj49svkTFdsyUjZXjzb1NwkDO+HnwC78BycBx0ATvAYdAN3ASdwH6wh/c4AXbyHvfAVHCGIjVjC8AoY0zpYA7oDzJBIVgFSsEXsAFcoltaRmejsqgoL0Q2IavxjkSZ12eRHBp9VdKTBsov43oXRWuMBC/5XYXlgCwwC9SDeSxs3cFdsBio4Rbydw7NN5aZWkbHSMSa8/PoBXM5qWtBHtvzOeHDQLGdrKrIFFeC5KTNllFdJsqE7jNlROfs5nPvf9S2CgwJtjiH1Ua7lxOh6+obbXub/TCP0hc0gMHsX0+xGjV0SqTTohZiHiuMthIKtlWFNbNul1tyR56T6b0WhJ0r8tyWKm+ZOK3oGTYjYBzjQCMoMM7r2vwAKnl9H2Pisri+/UapMQX7IpaT8Blm8RO7W+QPjHDjkG1hYr80eaTYc0/2VW4Wn98Pi4cLbuDAVnLtaNYmsf0NB+5m0XrGdZfPrUyLVREL0HM6Yyj7qxM+8znzwVmu0VAB+xrrtqXZTXY6ZFzqNHz3S2F9gdx8WyB1vhp57S3HZAQlwRE+cyr4GAtNnrGONLYD7IRykAWsyFw24KROMIudFpp+uhOwKi9jllVgLthi1AeN+1z3U41xRNrcZUd0kjNRqr9XyenqXAi+JtDYbGHNarzjT5uELJfGotOXM1/KwhMKtelk0BN4WExKaT+tzLWszFrhx4Mj4DyFO+iYcazkVeABs59Jiuko4ZakLnkaqgXpmM4eS5DRFk+MgQq93q1i4hxxyLJbGn5+kjgbe7UVo6ssbklbI97UVMBq2jy2d1+UywG7YRdsbAFfuGBz33XZVOKKcTxBruOL3FeFti6hnWMO92hs/BNREDzR02OJfbFtITgUZaTNo/caZLAxTKyz9aXkfyzZ0f4e/hZgAMX8C7KjSuh8AAAAAElFTkSuQmCC" border="0" alt="begun"><strong>begun</strong></a></div></td></tr></tbody></table></span></div><script type="text/javascript" src="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/context.jsp" id="begun_js_1"></script><script type="text/javascript" src="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/begun_tpl_block_horizontal.1530389e3e.js" id="begun_js_2"></script><iframe src="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/sandbox.htm" style="height:0;width:0;border:0"></iframe><script type="text/javascript" src="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/auto_rich.8d147d2d80.js" id="begun_js_3"></script>
                                        
                                    </div><div class="item-page">
		<h2>
								<a href="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/EasySTM32 - Интерфейс SPI в STM32. Часть 2.htm">
						Интерфейс SPI в STM32. Часть 2</a>
						</h2>
			
		<p style="text-align: justify;">В <a href="http://easystm32.ru/interfaces/43-spi-interface-part-1">предыдущей статье</a> я попробовал очень кратко рассказать о SPI интерфейсе, а сейчас настало время практики. &nbsp;В микроконтроллерах STM32F407Vxxx существуют аж целых три аппаратных SPI интерфейса. В других менее крутых контроллерах SPI модули не имеют существенных отличий, разве что их там поменьше. Чтоб не запутаться на каких ногах вашего контроллера висит SPI, рекомендую воспользоваться программой&nbsp;<a href="http://easystm32.ru/useful-things/26-microxplorer-utility">MicroXplorer</a>.&nbsp;Если SPI-ноги контроллера уже заняты, то следует напомнить о такой замечательной вещи как remap (позволяет перенести SPI на другие ноги). Посмотреть что и куда ремапится можно так же при помощи этой программы. У моего контроллера все SPI интерфейсы расположены на этих ногах:&nbsp;</p>
<p>&nbsp;<img style="display: block; margin-left: auto; margin-right: auto;" src="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/logo(1).jpg" alt="logo" width="473" height="523"></p>
<p style="text-align: justify;">Для упрощения работы со всей периферией микроконтроллера, (таймеры, UART, SPI итд) компания ST придумала библиотеку под названием&nbsp;stdperiph_lib. Раньше я почему-то старался не использовать &nbsp;её, но сейчас я осознал, что с её использованием код становится более понятным и читаемым + улучшается переносимость кода с одного STM32 контроллера на другой. Из-за этого, начиная с этой статьи, я буду использовать эту библиотеку для инициализации периферии.&nbsp;Чтоб понять как использовать SPI, крайне желательно ознакомиться со всеми регистрами через которые происходит взаимодействие с ним. Их как обычно достаточно много, но если разобраться, то ничего особо сложного в них нет. По идее библиотека&nbsp;<span style="text-align: justify;">stdperiph_lib как раз и предназначена для того, чтоб избавить программиста от необходимости напрямую взаимодействовать с регистрами настройки периферии, но я считаю что нужно иметь хотя-бы примерное представление о том, что и как она настраивает.&nbsp;</span></p>
 
<h2>Регистр&nbsp;SPI_CR1</h2>
<p><a href="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/SPI_CR1.png"><img style="display: block; margin-left: auto; margin-right: auto;" src="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/SPI_CR1.png" alt="SPI CR1" width="650" height="93"></a></p>
<p style="text-align: justify;"><strong>BIDIMODE</strong> - если этот бит установлен, то прием и передача данных осуществляются по одному проводу (не считая SCK). При этом, как я понял, MOSI вывод мастера подключается к MISO слейва. Экзотический режим на мой взгляд :)</p>
<p style="text-align: justify;"><strong>BIDIOE</strong> - этот бит используется в однопроводном режиме. Если он установлен - SPI модуль только передает данные. Если сброшен - то принимает.</p>
<p style="text-align: justify;"><strong>CRCEN</strong> - включает аппаратный модуль расчёт контрольной суммы. 0 - выкл, 1 - вкл. Изменять состояние этого бита можно только когда SPI модуль выключен (бит SPE=0).</p>
<p style="text-align: justify;"><strong>CRCNEXT</strong> - если этот бит установлен, то после следующей передачи байта данных, будет отправлена контрольная сумма.</p>
<p style="text-align: justify;"><strong>DFF</strong> - если бит сброшен, то SPI модуль передает/принимает данные по 8 бит, в противном случаее передается/принимается сразу по 16 бит. Изменять состояние этого бита можно только когда SPI модуль выключен (бит SPE=0).</p>
<p style="text-align: justify;"><strong>RXONLY</strong> - если используется 2-х проводной режим (см бит BIDIMODE) то установка этого бита запрещает передачу, SPI модуль работает только на приём</p>
<p style="text-align: justify;">Перед описанием следующих двух бит, нужно отметить одну интересную особенность вывода NSS (он же SS он же CS). Если SPI модуль настроен в режиме слейва, то он может получать сигнал с ноги NSS или же программно. Если бит <strong>SSM</strong> сброшен, то сигнал SS будет считываться с ноги NSS, а если он установлен, то состояние ноги NSS игноирируется. В таком случае для управления сигналом SS возлагается на бит <strong>SSI</strong>. Бит установлен - есть сигнал SS, в противном случае нет. Если же SPI модуль работает в режиме мастера, то ногу NSS нужно подтянуть к питанию или включить программное управление (SSM=1) и установить бит SSI. В противном случае - SPI модуль подумает, что появился новый мастер и сам станет слейвом. Этот момент для меня был не совсем очевиден и я потратил много времени чтоб разобраться.&nbsp;</p>
<p style="text-align: justify;"><strong>LSBFIRST</strong> - задает порядок передачи бит: <br> 0 - сначала передается старший бит <br> 1 - сначала передается младший бит</p>
<p style="margin-bottom: 0.0001pt; text-align: justify;"><strong>SPE</strong> - выключает/выключает SPI модуль</p>
<p style="margin-bottom: 0.0001pt; text-align: justify;"><strong>BR2</strong>,<strong>BR1</strong>,<strong>BR0</strong> - задают скорость приема/передачи (частоту SCK). Частота тактирования модуля SPI делится на число, которое задается комбинацией этих трех бит.</p>
<p style="margin-bottom: 0.0001pt; text-align: justify;">&nbsp;</p>
<table style="border-collapse: collapse; border: none;" border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr style="height: 13.6pt;">
<td style="width: 116.95pt; border: 1pt solid windowtext; padding: 0cm 5.4pt; height: 13.6pt;" valign="top" width="156">
<p style="margin-bottom: 0.0001pt; text-align: justify;">BR2</p>
</td>
<td style="width: 116.95pt; border-style: solid solid solid none; border-top-color: windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-top-width: 1pt; border-right-width: 1pt; border-bottom-width: 1pt; padding: 0cm 5.4pt; height: 13.6pt;" valign="top" width="156">
<p style="margin-bottom: 0.0001pt; text-align: justify;">BR1</p>
</td>
<td style="width: 116.95pt; border-style: solid solid solid none; border-top-color: windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-top-width: 1pt; border-right-width: 1pt; border-bottom-width: 1pt; padding: 0cm 5.4pt; height: 13.6pt;" valign="top" width="156">
<p style="margin-bottom: 0.0001pt; text-align: justify;">BR0</p>
</td>
<td style="width: 116.95pt; border-style: solid solid solid none; border-top-color: windowtext; border-right-color: windowtext; border-bottom-color: windowtext; border-top-width: 1pt; border-right-width: 1pt; border-bottom-width: 1pt; padding: 0cm 5.4pt; height: 13.6pt;" valign="top" width="156">
<p style="margin-bottom: 0.0001pt; text-align: justify;">Делитель</p>
</td>
</tr>
<tr style="height: 14.4pt;">
<td style="width: 116.95pt; border-style: none solid solid; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; padding: 0cm 5.4pt; height: 14.4pt;" valign="top" width="156">
<p style="margin-bottom: 0.0001pt; text-align: justify;">0</p>
</td>
<td style="width: 116.95pt; border-style: none solid solid none; border-bottom-color: windowtext; border-bottom-width: 1pt; border-right-color: windowtext; border-right-width: 1pt; padding: 0cm 5.4pt; height: 14.4pt;" valign="top" width="156">
<p style="margin-bottom: 0.0001pt; text-align: justify;">0</p>
</td>
<td style="width: 116.95pt; border-style: none solid solid none; border-bottom-color: windowtext; border-bottom-width: 1pt; border-right-color: windowtext; border-right-width: 1pt; padding: 0cm 5.4pt; height: 14.4pt;" valign="top" width="156">
<p style="margin-bottom: 0.0001pt; text-align: justify;">0</p>
</td>
<td style="width: 116.95pt; border-style: none solid solid none; border-bottom-color: windowtext; border-bottom-width: 1pt; border-right-color: windowtext; border-right-width: 1pt; padding: 0cm 5.4pt; height: 14.4pt;" valign="top" width="156">
<p style="margin-bottom: 0.0001pt; text-align: justify;">2</p>
</td>
</tr>
<tr style="height: 13.6pt;">
<td style="width: 116.95pt; border-style: none solid solid; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; padding: 0cm 5.4pt; height: 13.6pt;" valign="top" width="156">
<p style="margin-bottom: 0.0001pt; text-align: justify;">0</p>
</td>
<td style="width: 116.95pt; border-style: none solid solid none; border-bottom-color: windowtext; border-bottom-width: 1pt; border-right-color: windowtext; border-right-width: 1pt; padding: 0cm 5.4pt; height: 13.6pt;" valign="top" width="156">
<p style="margin-bottom: 0.0001pt; text-align: justify;">0</p>
</td>
<td style="width: 116.95pt; border-style: none solid solid none; border-bottom-color: windowtext; border-bottom-width: 1pt; border-right-color: windowtext; border-right-width: 1pt; padding: 0cm 5.4pt; height: 13.6pt;" valign="top" width="156">
<p style="margin-bottom: 0.0001pt; text-align: justify;">1</p>
</td>
<td style="width: 116.95pt; border-style: none solid solid none; border-bottom-color: windowtext; border-bottom-width: 1pt; border-right-color: windowtext; border-right-width: 1pt; padding: 0cm 5.4pt; height: 13.6pt;" valign="top" width="156">
<p style="margin-bottom: 0.0001pt; text-align: justify;">4</p>
</td>
</tr>
<tr style="height: 14.4pt;">
<td style="width: 116.95pt; border-style: none solid solid; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; padding: 0cm 5.4pt; height: 14.4pt;" valign="top" width="156">
<p style="margin-bottom: 0.0001pt; text-align: justify;">0</p>
</td>
<td style="width: 116.95pt; border-style: none solid solid none; border-bottom-color: windowtext; border-bottom-width: 1pt; border-right-color: windowtext; border-right-width: 1pt; padding: 0cm 5.4pt; height: 14.4pt;" valign="top" width="156">
<p style="margin-bottom: 0.0001pt; text-align: justify;">1</p>
</td>
<td style="width: 116.95pt; border-style: none solid solid none; border-bottom-color: windowtext; border-bottom-width: 1pt; border-right-color: windowtext; border-right-width: 1pt; padding: 0cm 5.4pt; height: 14.4pt;" valign="top" width="156">
<p style="margin-bottom: 0.0001pt; text-align: justify;">0</p>
</td>
<td style="width: 116.95pt; border-style: none solid solid none; border-bottom-color: windowtext; border-bottom-width: 1pt; border-right-color: windowtext; border-right-width: 1pt; padding: 0cm 5.4pt; height: 14.4pt;" valign="top" width="156">
<p style="margin-bottom: 0.0001pt; text-align: justify;">8</p>
</td>
</tr>
<tr style="height: 14.4pt;">
<td style="width: 116.95pt; border-style: none solid solid; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; padding: 0cm 5.4pt; height: 14.4pt;" valign="top" width="156">
<p style="margin-bottom: 0.0001pt; text-align: justify;">0</p>
</td>
<td style="width: 116.95pt; border-style: none solid solid none; border-bottom-color: windowtext; border-bottom-width: 1pt; border-right-color: windowtext; border-right-width: 1pt; padding: 0cm 5.4pt; height: 14.4pt;" valign="top" width="156">
<p style="margin-bottom: 0.0001pt; text-align: justify;">1</p>
</td>
<td style="width: 116.95pt; border-style: none solid solid none; border-bottom-color: windowtext; border-bottom-width: 1pt; border-right-color: windowtext; border-right-width: 1pt; padding: 0cm 5.4pt; height: 14.4pt;" valign="top" width="156">
<p style="margin-bottom: 0.0001pt; text-align: justify;">1</p>
</td>
<td style="width: 116.95pt; border-style: none solid solid none; border-bottom-color: windowtext; border-bottom-width: 1pt; border-right-color: windowtext; border-right-width: 1pt; padding: 0cm 5.4pt; height: 14.4pt;" valign="top" width="156">
<p style="margin-bottom: 0.0001pt; text-align: justify;">16</p>
</td>
</tr>
<tr style="height: 14.4pt;">
<td style="width: 116.95pt; border-style: none solid solid; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; padding: 0cm 5.4pt; height: 14.4pt;" valign="top" width="156">
<p style="margin-bottom: 0.0001pt; text-align: justify;">1</p>
</td>
<td style="width: 116.95pt; border-style: none solid solid none; border-bottom-color: windowtext; border-bottom-width: 1pt; border-right-color: windowtext; border-right-width: 1pt; padding: 0cm 5.4pt; height: 14.4pt;" valign="top" width="156">
<p style="margin-bottom: 0.0001pt; text-align: justify;">0</p>
</td>
<td style="width: 116.95pt; border-style: none solid solid none; border-bottom-color: windowtext; border-bottom-width: 1pt; border-right-color: windowtext; border-right-width: 1pt; padding: 0cm 5.4pt; height: 14.4pt;" valign="top" width="156">
<p style="margin-bottom: 0.0001pt; text-align: justify;">0</p>
</td>
<td style="width: 116.95pt; border-style: none solid solid none; border-bottom-color: windowtext; border-bottom-width: 1pt; border-right-color: windowtext; border-right-width: 1pt; padding: 0cm 5.4pt; height: 14.4pt;" valign="top" width="156">
<p style="margin-bottom: 0.0001pt; text-align: justify;">32</p>
</td>
</tr>
<tr style="height: 14.4pt;">
<td style="width: 116.95pt; border-style: none solid solid; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; padding: 0cm 5.4pt; height: 14.4pt;" valign="top" width="156">
<p style="margin-bottom: 0.0001pt; text-align: justify;">1</p>
</td>
<td style="width: 116.95pt; border-style: none solid solid none; border-bottom-color: windowtext; border-bottom-width: 1pt; border-right-color: windowtext; border-right-width: 1pt; padding: 0cm 5.4pt; height: 14.4pt;" valign="top" width="156">
<p style="margin-bottom: 0.0001pt; text-align: justify;">0</p>
</td>
<td style="width: 116.95pt; border-style: none solid solid none; border-bottom-color: windowtext; border-bottom-width: 1pt; border-right-color: windowtext; border-right-width: 1pt; padding: 0cm 5.4pt; height: 14.4pt;" valign="top" width="156">
<p style="margin-bottom: 0.0001pt; text-align: justify;">1</p>
</td>
<td style="width: 116.95pt; border-style: none solid solid none; border-bottom-color: windowtext; border-bottom-width: 1pt; border-right-color: windowtext; border-right-width: 1pt; padding: 0cm 5.4pt; height: 14.4pt;" valign="top" width="156">
<p style="margin-bottom: 0.0001pt; text-align: justify;">64</p>
</td>
</tr>
<tr style="height: 14.4pt;">
<td style="width: 116.95pt; border-style: none solid solid; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; padding: 0cm 5.4pt; height: 14.4pt;" valign="top" width="156">
<p style="margin-bottom: 0.0001pt; text-align: justify;">1</p>
</td>
<td style="width: 116.95pt; border-style: none solid solid none; border-bottom-color: windowtext; border-bottom-width: 1pt; border-right-color: windowtext; border-right-width: 1pt; padding: 0cm 5.4pt; height: 14.4pt;" valign="top" width="156">
<p style="margin-bottom: 0.0001pt; text-align: justify;">1</p>
</td>
<td style="width: 116.95pt; border-style: none solid solid none; border-bottom-color: windowtext; border-bottom-width: 1pt; border-right-color: windowtext; border-right-width: 1pt; padding: 0cm 5.4pt; height: 14.4pt;" valign="top" width="156">
<p style="margin-bottom: 0.0001pt; text-align: justify;">0</p>
</td>
<td style="width: 116.95pt; border-style: none solid solid none; border-bottom-color: windowtext; border-bottom-width: 1pt; border-right-color: windowtext; border-right-width: 1pt; padding: 0cm 5.4pt; height: 14.4pt;" valign="top" width="156">
<p style="margin-bottom: 0.0001pt; text-align: justify;">128</p>
</td>
</tr>
<tr style="height: 14.4pt;">
<td style="width: 116.95pt; border-style: none solid solid; border-right-color: windowtext; border-bottom-color: windowtext; border-left-color: windowtext; border-right-width: 1pt; border-bottom-width: 1pt; border-left-width: 1pt; padding: 0cm 5.4pt; height: 14.4pt;" valign="top" width="156">
<p style="margin-bottom: 0.0001pt; text-align: justify;">1</p>
</td>
<td style="width: 116.95pt; border-style: none solid solid none; border-bottom-color: windowtext; border-bottom-width: 1pt; border-right-color: windowtext; border-right-width: 1pt; padding: 0cm 5.4pt; height: 14.4pt;" valign="top" width="156">
<p style="margin-bottom: 0.0001pt; text-align: justify;">1</p>
</td>
<td style="width: 116.95pt; border-style: none solid solid none; border-bottom-color: windowtext; border-bottom-width: 1pt; border-right-color: windowtext; border-right-width: 1pt; padding: 0cm 5.4pt; height: 14.4pt;" valign="top" width="156">
<p style="margin-bottom: 0.0001pt; text-align: justify;">1</p>
</td>
<td style="width: 116.95pt; border-style: none solid solid none; border-bottom-color: windowtext; border-bottom-width: 1pt; border-right-color: windowtext; border-right-width: 1pt; padding: 0cm 5.4pt; height: 14.4pt;" valign="top" width="156">
<p style="margin-bottom: 0.0001pt; text-align: justify;">256</p>
</td>
</tr>
</tbody>
</table>
<p style="margin-bottom: 0.0001pt; text-align: justify;">Изменять состояние этих бит можно только когда SPI модуль выключен (бит SPE=0).</p>
<p style="margin-bottom: 0.0001pt; text-align: justify;"><strong>MSTR</strong> - если бит установлен - SPI модуль является мастером, иначе слейвом.</p>
<p style="margin-bottom: 0.0001pt; text-align: justify;"><strong>CPOL</strong> - полярность сигнала SCK. (см. табличку из <a href="http://easystm32.ru/interfaces/43-spi-interface-part-1">прошлой статьи</a>).</p>
<p style="margin-bottom: 0.0001pt; text-align: justify;"><strong>CPHA</strong> - фаза сигнала SCK (см. табличку из <a href="http://easystm32.ru/interfaces/43-spi-interface-part-1">прошлой статьи</a>).</p>
<p style="margin-bottom: 0.0001pt; text-align: justify;">&nbsp;</p>
<h2>Регистр&nbsp;SPI_CR2</h2>
<p><a href="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/SPI_CR2.png"><img style="display: block; margin-left: auto; margin-right: auto;" src="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/SPI_CR2.png" alt="SPI CR2" width="650" height="96"></a></p>
<p style="margin-bottom: 0.0001pt; text-align: justify;"><strong>TXEIE</strong> - разрешает прерывание, когда буфер передачи пуст (всё передалось)</p>
<p style="margin-bottom: 0.0001pt; text-align: justify;"><strong>RXNEIE</strong> - разрешает прерывание, когда буфер заполнен данными и их можно забирать.</p>
<p style="margin-bottom: 0.0001pt; text-align: justify;"><strong>ERRIE</strong> - разрешает прерывание в случае возникновения ошибки. Их всего три, чтоб разобраться какая возникла, нужно смотреть состояние бит в регистре статуса. Об этом чуть ниже.</p>
<p style="margin-bottom: 0.0001pt; text-align: justify;"><strong>FRF</strong> - Frame format, не разбирался что это такое.</p>
<p style="margin-bottom: 0.0001pt; text-align: justify;">0 -&nbsp; SPI Motorola mode</p>
<p style="margin-bottom: 0.0001pt; text-align: justify;">1 - SPI TI mode</p>
<p style="margin-bottom: 0.0001pt; text-align: justify;">По умолчанию там ноль, без надобности не трогать :)</p>
<p style="margin-bottom: 0.0001pt; text-align: justify;"><strong>SSOE</strong> – Если этот бит выставлен, то SPI модуль (в режиме мастера разумеется) сам управляет выводом NSS. Т.е. как я понял перед началом передачи выставляет ноль на этом выводе, а после завершения – выставляет единицу. Возможно это не правильно, у меня так и не получилось ничего с этим битом сделать.</p>
<p style="margin-bottom: 0.0001pt; text-align: justify;"><strong>TXDMAEN</strong> - разрешает/запрещает запрос DMA по завершению передачи</p>
<p style="margin-bottom: 0.0001pt; text-align: justify;"><strong>RXDMAEN</strong> - разрешает/запрещает запрос DMA по завершению приема</p>
<h2 style="margin-bottom: 0.0001pt; text-align: justify;">Статусный регистр SPI_SR</h2>
<p><a href="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/SPI_SR.png"><img style="display: block; margin-left: auto; margin-right: auto;" src="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/SPI_SR.png" alt="SPI SR" width="650" height="92"></a></p>
<p><strong>FRE</strong> - Frame error flag, пока не совсем понятно что это за флаг ошибки, он используется когда SPI модуль работает в режиме «TI mode» (бит FRF=1). Еще он относится к интерфейсу I2S, о нем будет отдельная статья. (не путать с I2C)</p>
<p><strong>BSY</strong> - если этот бит установлен, значит модуль SPI сейчас занят передачей данных.</p>
<p><strong>OVR</strong> - бит выставляется в том случае, если в SPI модуль поступили новые данные и перетерли старые которые не были прочитаны.</p>
<p><strong>MODF</strong> - выставляется в том случае если мастер внезапно перестал быть мастером. Такое возможно когда нога мастера NSS настроена как вход и на неё поступил сигнал низкого уровня.</p>
<p><strong>CRCERR</strong> - ошибка контрольной суммы</p>
<p><strong>UDR</strong> – флаг не используется в режиме SPI</p>
<p><strong>TXE</strong> - Передача данных завершилась</p>
<p><strong>RXNE</strong> - Приём данных завершен</p>
<h2>Регистр SPI_DR</h2>
<p>Представляет собой 16-ти битный регистр данных. На самом деле регистров два – один для передачи, а другой для приёма, но работа с ними осуществляется через один регистр SPI_DR. Если мы что-то в него пишем, то запись данных производится в регистр для передачи. Если читаем, то данные считываются из регистра для приёма данных.</p>
<h2>Регистр SPI_CRCPR</h2>
<p>Сюда записывают некоторое число, которое как-то должно повлиять на расчет контрольной суммы. По умолчанию там записано число 7.</p>
<h2>Регистр SPI_TXCRCR</h2>
<p>Сюда записывается контрольная сумма, которая посчиталась для передаваемых данных.</p>
<h2>Регистр SPI_RXCRCR</h2>
<p>Сюда записывается контрольная сумма, которая посчиталась для принятых данных.</p>
<h2>Примеры кода</h2>
<p style="text-align: justify;">Теперь настало время для кода. Для первых трёх примеров можно использовать плату <a href="http://easystm32.ru/stm32f4-discovery/41-otsenochnaya-plata-stm32f4discovery">STM32F4DISCOVERY</a>. Четвертый пример требует для запуска второй контроллер или еще одну отладочную платку <a href="http://easystm32.ru/stm32vl-discovery/9-acquaintance-with-stm32vl-discovery">STM32VLDISCOVERY</a>. Для начала рассмотрим простой пример, коего будет достаточно в 95% всех случаев. Пример показывает как настроить SPI1 в режиме мастера и отправить данные. В бесконечном цикле происходит передача одного и того же байта (0x93).&nbsp;&nbsp;</p>
<p style="text-align: justify;"><span style="text-align: justify;"><script type="text/javascript">
	SyntaxHighlighter.config.clipboardSwf = "http://easystm32.ru/plugins/content/CodeCitation/codecitation/scripts/clipboard.swf";
	SyntaxHighlighter.defaults["auto-links"] = true;
	SyntaxHighlighter.defaults["collapse"] = false;
	SyntaxHighlighter.defaults["gutter"] = true;
	SyntaxHighlighter.defaults["smart-tabs"] = true;
	SyntaxHighlighter.defaults["tab-size"] = 4;
	SyntaxHighlighter.defaults["toolbar"] = true;
	SyntaxHighlighter.defaults["wrap-lines"] = true;	
	SyntaxHighlighter.all();
</script></span></p><div style="overflow: hidden; display: block; height: auto; width: inherit;"><div id="highlighter_296920" class="syntaxhighlighter "><div class="bar                                                                                                  "><div class="toolbar"><a href="http://easystm32.ru/interfaces/45-spi-interface-part-2#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_296920_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_296920" menu="false" src="http://easystm32.ru/plugins/content/CodeCitation/codecitation/scripts/clipboard.swf"></div><a href="http://easystm32.ru/interfaces/45-spi-interface-part-2#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://easystm32.ru/interfaces/45-spi-interface-part-2#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><code class="number">01.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">#include "stm32f4xx.h"</code></span></span></div><div class="line alt2"><code class="number">02.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">#include "stm32f4xx_gpio.h"</code></span></span></div><div class="line alt1"><code class="number">03.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">#include "stm32f4xx_rcc.h"</code></span></span></div><div class="line alt2"><code class="number">04.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">#include "stm32f4xx_spi.h"</code></span></span></div><div class="line alt1"><code class="number">05.</code><span class="content"><span class="block" style="margin-left: 0px !important;">&nbsp;</span></span></div><div class="line alt2"><code class="number">06.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="color1 bold">int</code> <code class="plain">main(</code><code class="keyword bold">void</code><code class="plain">) {</code></span></span></div><div class="line alt1"><code class="number">07.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitTypeDef GPIO_InitStructure;</code></span></span></div><div class="line alt2"><code class="number">08.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitTypeDef SPI_InitStructure;</code></span></span></div><div class="line alt1"><code class="number">09.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 5px !important;">&nbsp;</span></span></div><div class="line alt2"><code class="number">10.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="comments">// Тактирование модуля SPI1 и порта А</code></span></span></div><div class="line alt1"><code class="number">11.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">RCC_APB2PeriphClockCmd(RCC_APB2Periph_SPI1, ENABLE);</code></span></span></div><div class="line alt2"><code class="number">12.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOA, ENABLE);</code></span></span></div><div class="line alt1"><code class="number">13.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 5px !important;">&nbsp;</span></span></div><div class="line alt2"><code class="number">14.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="comments">// Настраиваем ноги SPI1 для работы в режиме альтернативной функции</code></span></span></div><div class="line alt1"><code class="number">15.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_PinAFConfig(GPIOA, GPIO_PinSource7, GPIO_AF_SPI1);</code></span></span></div><div class="line alt2"><code class="number">16.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_PinAFConfig(GPIOA, GPIO_PinSource5, GPIO_AF_SPI1);</code></span></span></div><div class="line alt1"><code class="number">17.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_PinAFConfig(GPIOA, GPIO_PinSource6, GPIO_AF_SPI1);</code></span></span></div><div class="line alt2"><code class="number">18.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 5px !important;">&nbsp;</span></span></div><div class="line alt1"><code class="number">19.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;</code></span></span></div><div class="line alt2"><code class="number">20.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</code></span></span></div><div class="line alt1"><code class="number">21.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;</code></span></span></div><div class="line alt2"><code class="number">22.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_NOPULL;</code></span></span></div><div class="line alt1"><code class="number">23.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_Pin = GPIO_Pin_7 | GPIO_Pin_6 | GPIO_Pin_5;</code></span></span></div><div class="line alt2"><code class="number">24.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_Init(GPIOA, &amp;GPIO_InitStructure);</code></span></span></div><div class="line alt1"><code class="number">25.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 5px !important;">&nbsp;</span></span></div><div class="line alt2"><code class="number">26.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="comments">//Заполняем структуру с параметрами SPI модуля</code></span></span></div><div class="line alt1"><code class="number">27.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_Direction = SPI_Direction_2Lines_FullDuplex; </code><code class="comments">//полный дуплекс</code></span></span></div><div class="line alt2"><code class="number">28.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_DataSize = SPI_DataSize_8b; </code><code class="comments">// передаем по 8 бит</code></span></span></div><div class="line alt1"><code class="number">29.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_CPOL = SPI_CPOL_Low; </code><code class="comments">// Полярность и</code></span></span></div><div class="line alt2"><code class="number">30.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_CPHA = SPI_CPHA_1Edge; </code><code class="comments">// фаза тактового сигнала</code></span></span></div><div class="line alt1"><code class="number">31.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_NSS = SPI_NSS_Soft; </code><code class="comments">// Управлять состоянием сигнала NSS программно</code></span></span></div><div class="line alt2"><code class="number">32.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_BaudRatePrescaler = SPI_BaudRatePrescaler_32; </code><code class="comments">// Предделитель SCK</code></span></span></div><div class="line alt1"><code class="number">33.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_FirstBit = SPI_FirstBit_MSB; </code><code class="comments">// Первым отправляется старший бит</code></span></span></div><div class="line alt2"><code class="number">34.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_Mode = SPI_Mode_Master; </code><code class="comments">// Режим - мастер</code></span></span></div><div class="line alt1"><code class="number">35.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_Init(SPI1, &amp;SPI_InitStructure); </code><code class="comments">//Настраиваем SPI1</code></span></span></div><div class="line alt2"><code class="number">36.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_Cmd(SPI1, ENABLE); </code><code class="comments">// Включаем модуль SPI1....</code></span></span></div><div class="line alt1"><code class="number">37.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 5px !important;">&nbsp;</span></span></div><div class="line alt2"><code class="number">38.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="comments">// Поскольку сигнал NSS контролируется программно, установим его в единицу</code></span></span></div><div class="line alt1"><code class="number">39.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="comments">// Если сбросить его в ноль, то наш SPI модуль подумает, что</code></span></span></div><div class="line alt2"><code class="number">40.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="comments">// у нас мультимастерная топология и его лишили полномочий мастера.</code></span></span></div><div class="line alt1"><code class="number">41.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_NSSInternalSoftwareConfig(SPI1, SPI_NSSInternalSoft_Set);</code></span></span></div><div class="line alt2"><code class="number">42.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 5px !important;">&nbsp;</span></span></div><div class="line alt1"><code class="number">43.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="keyword bold">while</code><code class="plain">(1) {</code></span></span></div><div class="line alt2"><code class="number">44.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 20px !important;"><code class="plain">SPI_I2S_SendData(SPI1, 0x93); </code><code class="comments">//Передаем байт 0x93 через SPI1</code></span></span></div><div class="line alt1"><code class="number">45.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 20px !important;"><code class="keyword bold">while</code><code class="plain">(SPI_I2S_GetFlagStatus(SPI1, SPI_I2S_FLAG_BSY) == SET) </code><code class="comments">//Передатчик занят?</code></span></span></div><div class="line alt2"><code class="number">46.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 30px !important;"><code class="plain">; </code><code class="comments">// значит ничего не делаем</code></span></span></div><div class="line alt1"><code class="number">47.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">}</code></span></span></div><div class="line alt2"><code class="number">48.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">}</code></span></span></div></div></div></div><p></p>
<p style="text-align: justify;">Следующий пример показывает как данные могут быть приняты тем же модулем SPI который их отправил. Для этого потребуется замкнуть выводы PA7 и PA6. Он стоят рядом, можно просто накинуть перемычку. Если в SPI пришел тот же байт который мы отправили, то загорается зеленый светодиод, в противном случае - красный.&nbsp;</p>
<p style="text-align: justify;"><span style="text-align: justify;"><span style="text-align: justify;"></span></span></p><div style="overflow: hidden; display: block; height: auto; width: inherit;"><div id="highlighter_95274" class="syntaxhighlighter "><div class="bar                                                     "><div class="toolbar"><a href="http://easystm32.ru/interfaces/45-spi-interface-part-2#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_95274_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_95274" menu="false" src="http://easystm32.ru/plugins/content/CodeCitation/codecitation/scripts/clipboard.swf"></div><a href="http://easystm32.ru/interfaces/45-spi-interface-part-2#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://easystm32.ru/interfaces/45-spi-interface-part-2#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><code class="number">01.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">#include "stm32f4xx.h"</code></span></span></div><div class="line alt2"><code class="number">02.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">#include "stm32f4xx_gpio.h"</code></span></span></div><div class="line alt1"><code class="number">03.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">#include "stm32f4xx_rcc.h"</code></span></span></div><div class="line alt2"><code class="number">04.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">#include "stm32f4xx_spi.h"</code></span></span></div><div class="line alt1"><code class="number">05.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 5px !important;">&nbsp;</span></span></div><div class="line alt2"><code class="number">06.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">#define LED_PORT GPIOD</code></span></span></div><div class="line alt1"><code class="number">07.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">#define LED_GREEN (1&lt;&lt;12)</code></span></span></div><div class="line alt2"><code class="number">08.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">#define LED_RED (1&lt;&lt;14)</code></span></span></div><div class="line alt1"><code class="number">09.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 5px !important;">&nbsp;</span></span></div><div class="line alt2"><code class="number">10.</code><span class="content"><span class="block" style="margin-left: 0px !important;">&nbsp;</span></span></div><div class="line alt1"><code class="number">11.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="color1 bold">int</code> <code class="plain">main(</code><code class="keyword bold">void</code><code class="plain">) {</code></span></span></div><div class="line alt2"><code class="number">12.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitTypeDef GPIO_InitStructure;</code></span></span></div><div class="line alt1"><code class="number">13.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitTypeDef SPI_InitStructure;</code></span></span></div><div class="line alt2"><code class="number">14.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 5px !important;">&nbsp;</span></span></div><div class="line alt1"><code class="number">15.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="comments">//Тактирование порта со светодиодами</code></span></span></div><div class="line alt2"><code class="number">16.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOD, ENABLE);</code></span></span></div><div class="line alt1"><code class="number">17.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 5px !important;">&nbsp;</span></span></div><div class="line alt2"><code class="number">18.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_OUT;</code></span></span></div><div class="line alt1"><code class="number">19.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</code></span></span></div><div class="line alt2"><code class="number">20.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;</code></span></span></div><div class="line alt1"><code class="number">21.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 5px !important;">&nbsp;</span></span></div><div class="line alt2"><code class="number">22.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="comments">//Пины со светодиодами настраиваем как выходы</code></span></span></div><div class="line alt1"><code class="number">23.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_Pin = ( LED_GREEN | LED_RED ) ;</code></span></span></div><div class="line alt2"><code class="number">24.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_Init(LED_PORT, &amp;GPIO_InitStructure);</code></span></span></div><div class="line alt1"><code class="number">25.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 5px !important;">&nbsp;</span></span></div><div class="line alt2"><code class="number">26.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="comments">// Тактирование модуля SPI1 и порта А</code></span></span></div><div class="line alt1"><code class="number">27.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">RCC_APB2PeriphClockCmd(RCC_APB2Periph_SPI1, ENABLE);</code></span></span></div><div class="line alt2"><code class="number">28.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOA, ENABLE);</code></span></span></div><div class="line alt1"><code class="number">29.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 5px !important;">&nbsp;</span></span></div><div class="line alt2"><code class="number">30.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="comments">// Настраиваем ноги SPI1 для работы в режиме альтернативной функции</code></span></span></div><div class="line alt1"><code class="number">31.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_PinAFConfig(GPIOA, GPIO_PinSource7, GPIO_AF_SPI1);</code></span></span></div><div class="line alt2"><code class="number">32.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_PinAFConfig(GPIOA, GPIO_PinSource5, GPIO_AF_SPI1);</code></span></span></div><div class="line alt1"><code class="number">33.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_PinAFConfig(GPIOA, GPIO_PinSource6, GPIO_AF_SPI1);</code></span></span></div><div class="line alt2"><code class="number">34.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 5px !important;">&nbsp;</span></span></div><div class="line alt1"><code class="number">35.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;</code></span></span></div><div class="line alt2"><code class="number">36.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</code></span></span></div><div class="line alt1"><code class="number">37.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;</code></span></span></div><div class="line alt2"><code class="number">38.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_NOPULL;</code></span></span></div><div class="line alt1"><code class="number">39.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_Pin = GPIO_Pin_7 | GPIO_Pin_6 | GPIO_Pin_5;</code></span></span></div><div class="line alt2"><code class="number">40.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_Init(GPIOA, &amp;GPIO_InitStructure);</code></span></span></div><div class="line alt1"><code class="number">41.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 5px !important;">&nbsp;</span></span></div><div class="line alt2"><code class="number">42.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="comments">//Заполняем структуру с параметрами SPI модуля</code></span></span></div><div class="line alt1"><code class="number">43.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_Direction = SPI_Direction_2Lines_FullDuplex; </code><code class="comments">//полный дуплекс</code></span></span></div><div class="line alt2"><code class="number">44.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_DataSize = SPI_DataSize_8b; </code><code class="comments">// передаем по 8 бит</code></span></span></div><div class="line alt1"><code class="number">45.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_CPOL = SPI_CPOL_Low; </code><code class="comments">// Полярность и</code></span></span></div><div class="line alt2"><code class="number">46.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_CPHA = SPI_CPHA_1Edge; </code><code class="comments">// фаза тактового сигнала</code></span></span></div><div class="line alt1"><code class="number">47.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_NSS = SPI_NSS_Soft; </code><code class="comments">// Управлять состоянием сигнала NSS программно</code></span></span></div><div class="line alt2"><code class="number">48.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_BaudRatePrescaler = SPI_BaudRatePrescaler_32; </code><code class="comments">// Предделитель SCK</code></span></span></div><div class="line alt1"><code class="number">49.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_FirstBit = SPI_FirstBit_MSB; </code><code class="comments">// Первым отправляется старший бит</code></span></span></div><div class="line alt2"><code class="number">50.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_Mode = SPI_Mode_Master; </code><code class="comments">// Режим - мастер</code></span></span></div><div class="line alt1"><code class="number">51.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_Init(SPI1, &amp;SPI_InitStructure); </code><code class="comments">//Настраиваем SPI1</code></span></span></div><div class="line alt2"><code class="number">52.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_Cmd(SPI1, ENABLE); </code><code class="comments">// Включаем модуль SPI1....</code></span></span></div><div class="line alt1"><code class="number">53.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 5px !important;">&nbsp;</span></span></div><div class="line alt2"><code class="number">54.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="comments">// Поскольку сигнал NSS контролируется программно, установим его в единицу</code></span></span></div><div class="line alt1"><code class="number">55.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="comments">// Если сбросить его в ноль, то наш SPI модуль подумает, что</code></span></span></div><div class="line alt2"><code class="number">56.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="comments">// у нас мультимастерная топология и его лишили полномочий мастера.</code></span></span></div><div class="line alt1"><code class="number">57.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_NSSInternalSoftwareConfig(SPI1, SPI_NSSInternalSoft_Set);</code></span></span></div><div class="line alt2"><code class="number">58.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 5px !important;">&nbsp;</span></span></div><div class="line alt1"><code class="number">59.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">uint16_t data = 0;</code></span></span></div><div class="line alt2"><code class="number">60.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="keyword bold">while</code><code class="plain">(1) {</code></span></span></div><div class="line alt1"><code class="number">61.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 20px !important;"><code class="plain">SPI_I2S_SendData(SPI1, 0x93); </code><code class="comments">//Передаем байт 0x93 через SPI1</code></span></span></div><div class="line alt2"><code class="number">62.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 20px !important;"><code class="keyword bold">while</code><code class="plain">(SPI_I2S_GetFlagStatus(SPI1, SPI_I2S_FLAG_BSY) == SET) </code><code class="comments">//Передатчик занят?</code></span></span></div><div class="line alt1"><code class="number">63.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 30px !important;"><code class="plain">; </code><code class="comments">// значит ничего не делаем</code></span></span></div><div class="line alt2"><code class="number">64.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 5px !important;">&nbsp;</span></span></div><div class="line alt1"><code class="number">65.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 20px !important;"><code class="keyword bold">if</code> <code class="plain">(SPI_I2S_GetFlagStatus(SPI1, SPI_I2S_FLAG_RXNE) == SET) { </code><code class="comments">//Если данные пришли</code></span></span></div><div class="line alt2"><code class="number">66.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 30px !important;"><code class="plain">data = SPI_I2S_ReceiveData(SPI1); </code><code class="comments">//Читаем принятые данные</code></span></span></div><div class="line alt1"><code class="number">67.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 40px !important;"><code class="keyword bold">if</code> <code class="plain">(data==0x93) { </code><code class="comments">//Пришли правильные данные ?</code></span></span></div><div class="line alt2"><code class="number">68.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 60px !important;"><code class="plain">GPIO_Write(LED_PORT,LED_GREEN);</code></span></span></div><div class="line alt1"><code class="number">69.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 50px !important;"><code class="plain">} </code><code class="keyword bold">else</code> <code class="plain">{</code></span></span></div><div class="line alt2"><code class="number">70.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 60px !important;"><code class="plain">GPIO_Write(LED_PORT,LED_RED);</code></span></span></div><div class="line alt1"><code class="number">71.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 40px !important;"><code class="plain">}</code></span></span></div><div class="line alt2"><code class="number">72.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 30px !important;"><code class="plain">}</code></span></span></div><div class="line alt1"><code class="number">73.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 15px !important;"><code class="plain">}</code></span></span></div><div class="line alt2"><code class="number">74.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">}</code></span></span></div></div></div></div><p></p>
<p style="text-align: justify;">Если кроме байт данных нужно еще и отсылать контрольную сумму, то можно сделать это так как написано ниже. В инициализации SPI модуля почти ничего не поменялось: &nbsp;</p>
<p style="text-align: justify;"></p><div style="overflow: hidden; display: block; height: auto; width: inherit;"><div id="highlighter_830674" class="syntaxhighlighter "><div class="bar         show"><div class="toolbar"><a href="http://easystm32.ru/interfaces/45-spi-interface-part-2#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_830674_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_830674" menu="false" src="http://easystm32.ru/plugins/content/CodeCitation/codecitation/scripts/clipboard.swf"></div><a href="http://easystm32.ru/interfaces/45-spi-interface-part-2#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://easystm32.ru/interfaces/45-spi-interface-part-2#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><code class="number">01.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">#include "stm32f4xx.h"</code></span></span></div><div class="line alt2"><code class="number">02.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">#include "stm32f4xx_gpio.h"</code></span></span></div><div class="line alt1"><code class="number">03.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">#include "stm32f4xx_rcc.h"</code></span></span></div><div class="line alt2"><code class="number">04.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">#include "stm32f4xx_spi.h"</code></span></span></div><div class="line alt1"><code class="number">05.</code><span class="content"><span class="block" style="margin-left: 0px !important;">&nbsp;</span></span></div><div class="line alt2"><code class="number">06.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="color1 bold">int</code> <code class="plain">main(</code><code class="keyword bold">void</code><code class="plain">) {</code></span></span></div><div class="line alt1"><code class="number">07.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitTypeDef GPIO_InitStructure;</code></span></span></div><div class="line alt2"><code class="number">08.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitTypeDef SPI_InitStructure;</code></span></span></div><div class="line alt1"><code class="number">09.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="comments">// Тактирование модуля SPI1 и порта А</code></span></span></div><div class="line alt2"><code class="number">10.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">RCC_APB2PeriphClockCmd(RCC_APB2Periph_SPI1, ENABLE);</code></span></span></div><div class="line alt1"><code class="number">11.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOA, ENABLE);</code></span></span></div><div class="line alt2"><code class="number">12.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="comments">// Настраиваем ноги SPI1 для работы в режиме альтернативной функции</code></span></span></div><div class="line alt1"><code class="number">13.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_PinAFConfig(GPIOA, GPIO_PinSource7, GPIO_AF_SPI1);</code></span></span></div><div class="line alt2"><code class="number">14.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_PinAFConfig(GPIOA, GPIO_PinSource5, GPIO_AF_SPI1);</code></span></span></div><div class="line alt1"><code class="number">15.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_PinAFConfig(GPIOA, GPIO_PinSource6, GPIO_AF_SPI1);</code></span></span></div><div class="line alt2"><code class="number">16.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 5px !important;">&nbsp;</span></span></div><div class="line alt1"><code class="number">17.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;</code></span></span></div><div class="line alt2"><code class="number">18.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</code></span></span></div><div class="line alt1"><code class="number">19.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;</code></span></span></div><div class="line alt2"><code class="number">20.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_NOPULL;</code></span></span></div><div class="line alt1"><code class="number">21.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_Pin = GPIO_Pin_7 | GPIO_Pin_6 | GPIO_Pin_5;</code></span></span></div><div class="line alt2"><code class="number">22.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_Init(GPIOA, &amp;GPIO_InitStructure);</code></span></span></div><div class="line alt1"><code class="number">23.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="comments">//Заполняем структуру с параметрами SPI модуля</code></span></span></div><div class="line alt2"><code class="number">24.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_Direction = SPI_Direction_2Lines_FullDuplex; </code><code class="comments">//полный дуплекс</code></span></span></div><div class="line alt1"><code class="number">25.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_DataSize = SPI_DataSize_8b; </code><code class="comments">// передаем по 8 бит</code></span></span></div><div class="line alt2"><code class="number">26.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_CPOL = SPI_CPOL_Low; </code><code class="comments">// Полярность и</code></span></span></div><div class="line alt1"><code class="number">27.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_CPHA = SPI_CPHA_1Edge; </code><code class="comments">// фаза тактового сигнала</code></span></span></div><div class="line alt2"><code class="number">28.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_NSS = SPI_NSS_Soft; </code><code class="comments">// Управлять состоянием сигнала NSS программно</code></span></span></div><div class="line alt1"><code class="number">29.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_BaudRatePrescaler = SPI_BaudRatePrescaler_32; </code><code class="comments">// Предделитель SCK</code></span></span></div><div class="line alt2"><code class="number">30.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_FirstBit = SPI_FirstBit_MSB; </code><code class="comments">// Первым отправляется старший бит</code></span></span></div><div class="line alt1"><code class="number">31.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_Mode = SPI_Mode_Master; </code><code class="comments">// Режим - мастер</code></span></span></div><div class="line alt2"><code class="number">32.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_CRCPolynomial = 0x07; </code><code class="comments">// Задаем значение параметра CRCPolynomial</code></span></span></div><div class="line alt1"><code class="number">33.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_CalculateCRC(SPI1,ENABLE); </code><code class="comments">//Включаем расчёт CRC</code></span></span></div><div class="line alt2"><code class="number">34.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_Init(SPI1, &amp;SPI_InitStructure); </code><code class="comments">//Настраиваем SPI1</code></span></span></div><div class="line alt1"><code class="number">35.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_Cmd(SPI1, ENABLE); </code><code class="comments">// Включаем модуль SPI1....</code></span></span></div><div class="line alt2"><code class="number">36.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="comments">// Поскольку сигнал NSS контролируется программно, установим его в единицу</code></span></span></div><div class="line alt1"><code class="number">37.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="comments">// Если сбросить его в ноль, то наш SPI модуль подумает, что</code></span></span></div><div class="line alt2"><code class="number">38.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="comments">// у нас мультимастерная топология и его лишили полномочий мастера.</code></span></span></div><div class="line alt1"><code class="number">39.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_NSSInternalSoftwareConfig(SPI1, SPI_NSSInternalSoft_Set);</code></span></span></div><div class="line alt2"><code class="number">40.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_I2S_SendData(SPI1, 0xAA); </code></span></span></div><div class="line alt1"><code class="number">41.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="keyword bold">while</code><code class="plain">(SPI_I2S_GetFlagStatus(SPI1, SPI_I2S_FLAG_BSY) == SET);</code></span></span></div><div class="line alt2"><code class="number">42.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_I2S_SendData(SPI1, 0xBB); </code></span></span></div><div class="line alt1"><code class="number">43.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="keyword bold">while</code><code class="plain">(SPI_I2S_GetFlagStatus(SPI1, SPI_I2S_FLAG_BSY) == SET);</code></span></span></div><div class="line alt2"><code class="number">44.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 5px !important;">&nbsp;</span></span></div><div class="line alt1"><code class="number">45.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_TransmitCRC(SPI1); </code><code class="comments">//сразу после последней передачи данных</code></span></span></div><div class="line alt2"><code class="number">46.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="comments">// отправить контрольную сумму которая рассчиталась из трех переданых байт</code></span></span></div><div class="line alt1"><code class="number">47.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="comments">// 0xAA ,0xBB, 0xCC и некого числа которое называется CRCPolynomial (7 по дефолту) </code></span></span></div><div class="line alt2"><code class="number">48.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="comments">// Алгоритм по которому она считается мне неизвестен, пока не вникал.</code></span></span></div><div class="line alt1"><code class="number">49.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 5px !important;">&nbsp;</span></span></div><div class="line alt2"><code class="number">50.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_I2S_SendData(SPI1, 0xCC); </code><code class="comments">//Передаем последний байт и контрольную сумму</code></span></span></div><div class="line alt1"><code class="number">51.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="keyword bold">while</code><code class="plain">(SPI_I2S_GetFlagStatus(SPI1, SPI_I2S_FLAG_BSY) == SET);</code></span></span></div><div class="line alt2"><code class="number">52.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 5px !important;">&nbsp;</span></span></div><div class="line alt1"><code class="number">53.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="keyword bold">return</code> <code class="plain">0;</code></span></span></div><div class="line alt2"><code class="number">54.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 5px !important;">&nbsp;</span></span></div><div class="line alt1"><code class="number">55.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">}</code></span></span></div></div></div></div><p></p>
<div style="text-align: justify;">Ну и напоследок пример поинтересней. Первый контроллер шлёт байты данных, второй их принимает и отсылает обратно (во время следующей отправки данных) . &nbsp;Первый проверяет что вернулось то, что отслылали. Если это так, то загорается зеленый светодиод. В противном случае красный. Чтоб запустить нужно соединить две отладочных платы вот так:</div>
<div style="text-align: justify;">&nbsp;</div>
<div>&nbsp;<img style="display: block; margin-left: auto; margin-right: auto;" src="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/boards.jpg" alt="boards" width="650" height="440"></div>
<div style="text-align: justify;">Исходный код для платы STM32VLDISCOVERY</div>
<div style="text-align: justify;">&nbsp;</div>
<div><div style="overflow: hidden; display: block; height: auto; width: inherit;"><div id="highlighter_918271" class="syntaxhighlighter "><div class="bar                        "><div class="toolbar"><a href="http://easystm32.ru/interfaces/45-spi-interface-part-2#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_918271_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_918271" menu="false" src="http://easystm32.ru/plugins/content/CodeCitation/codecitation/scripts/clipboard.swf"></div><a href="http://easystm32.ru/interfaces/45-spi-interface-part-2#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://easystm32.ru/interfaces/45-spi-interface-part-2#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><code class="number">01.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">#include "stm32f10x.h"</code></span></span></div><div class="line alt2"><code class="number">02.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">#include "stm32f10x_gpio.h"</code></span></span></div><div class="line alt1"><code class="number">03.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">#include "stm32f10x_rcc.h"</code></span></span></div><div class="line alt2"><code class="number">04.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">#include "stm32f10x_spi.h"</code></span></span></div><div class="line alt1"><code class="number">05.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 5px !important;">&nbsp;</span></span></div><div class="line alt2"><code class="number">06.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="color1 bold">int</code> <code class="plain">main(</code><code class="keyword bold">void</code><code class="plain">) {</code></span></span></div><div class="line alt1"><code class="number">07.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 5px !important;">&nbsp;</span></span></div><div class="line alt2"><code class="number">08.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitTypeDef GPIO_InitStructure;</code></span></span></div><div class="line alt1"><code class="number">09.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitTypeDef SPI_InitStructure;</code></span></span></div><div class="line alt2"><code class="number">10.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 5px !important;">&nbsp;</span></span></div><div class="line alt1"><code class="number">11.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOC , ENABLE);</code></span></span></div><div class="line alt2"><code class="number">12.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">RCC_APB2PeriphClockCmd(RCC_APB2Periph_SPI1, ENABLE);</code></span></span></div><div class="line alt1"><code class="number">13.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA, ENABLE);</code></span></span></div><div class="line alt2"><code class="number">14.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_Pin = (GPIO_Pin_9 | GPIO_Pin_8);</code></span></span></div><div class="line alt1"><code class="number">15.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;</code></span></span></div><div class="line alt2"><code class="number">16.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</code></span></span></div><div class="line alt1"><code class="number">17.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_Init(GPIOC , &amp;GPIO_InitStructure);</code></span></span></div><div class="line alt2"><code class="number">18.</code><span class="content"><span class="block" style="margin-left: 0px !important;">&nbsp;</span></span></div><div class="line alt1"><code class="number">19.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_Pin = GPIO_Pin_4 | GPIO_Pin_6 ;</code></span></span></div><div class="line alt2"><code class="number">20.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</code></span></span></div><div class="line alt1"><code class="number">21.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP;</code></span></span></div><div class="line alt2"><code class="number">22.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_Init(GPIOA, &amp;GPIO_InitStructure);</code></span></span></div><div class="line alt1"><code class="number">23.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_Pin = GPIO_Pin_5 | GPIO_Pin_7;</code></span></span></div><div class="line alt2"><code class="number">24.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</code></span></span></div><div class="line alt1"><code class="number">25.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN_FLOATING;</code></span></span></div><div class="line alt2"><code class="number">26.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_Init(GPIOA, &amp;GPIO_InitStructure);</code></span></span></div><div class="line alt1"><code class="number">27.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="comments">//Заполняем структуру с параметрами SPI модуля</code></span></span></div><div class="line alt2"><code class="number">28.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_Direction = SPI_Direction_2Lines_FullDuplex; </code><code class="comments">//полный дуплекс</code></span></span></div><div class="line alt1"><code class="number">29.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_DataSize = SPI_DataSize_8b; </code><code class="comments">// передаем по 8 бит</code></span></span></div><div class="line alt2"><code class="number">30.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_CPOL = SPI_CPOL_Low; </code><code class="comments">// Полярность и</code></span></span></div><div class="line alt1"><code class="number">31.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_CPHA = SPI_CPHA_1Edge; </code><code class="comments">// фаза тактового сигнала</code></span></span></div><div class="line alt2"><code class="number">32.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_NSS = SPI_NSS_Hard; </code><code class="comments">// Управлять состоянием сигнала NSS аппаратно</code></span></span></div><div class="line alt1"><code class="number">33.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_BaudRatePrescaler = SPI_BaudRatePrescaler_32; </code><code class="comments">// Предделитель SCK</code></span></span></div><div class="line alt2"><code class="number">34.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_FirstBit = SPI_FirstBit_MSB; </code><code class="comments">// Первым отправляется старший бит</code></span></span></div><div class="line alt1"><code class="number">35.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_Mode = SPI_Mode_Slave; </code><code class="comments">// Режим - слейв</code></span></span></div><div class="line alt2"><code class="number">36.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_Init(SPI1, &amp;SPI_InitStructure); </code><code class="comments">//Настраиваем SPI1</code></span></span></div><div class="line alt1"><code class="number">37.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_I2S_ITConfig(SPI1,SPI_I2S_IT_RXNE,ENABLE); </code><code class="comments">//Включаем прерывание по приему байта</code></span></span></div><div class="line alt2"><code class="number">38.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_Cmd(SPI1, ENABLE); </code><code class="comments">// Включаем модуль SPI1....</code></span></span></div><div class="line alt1"><code class="number">39.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">NVIC_EnableIRQ(SPI1_IRQn); </code><code class="comments">//Разрешаем прерывания от SPI1</code></span></span></div><div class="line alt2"><code class="number">40.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 5px !important;">&nbsp;</span></span></div><div class="line alt1"><code class="number">41.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="keyword bold">while</code><code class="plain">(1) {</code></span></span></div><div class="line alt2"><code class="number">42.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 20px !important;"><code class="comments">// все работает на прерываниях</code></span></span></div><div class="line alt1"><code class="number">43.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">}</code></span></span></div><div class="line alt2"><code class="number">44.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">}</code></span></span></div><div class="line alt1"><code class="number">45.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 5px !important;">&nbsp;</span></span></div><div class="line alt2"><code class="number">46.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="comments">//Обработчик прерываний от SPI1</code></span></span></div><div class="line alt1"><code class="number">47.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 5px !important;">&nbsp;</span></span></div><div class="line alt2"><code class="number">48.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="keyword bold">void</code> <code class="plain">SPI1_IRQHandler (</code><code class="keyword bold">void</code><code class="plain">) {</code></span></span></div><div class="line alt1"><code class="number">49.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="keyword bold">if</code> <code class="plain">(SPI_I2S_GetFlagStatus(SPI1,SPI_I2S_FLAG_RXNE)==SET) {</code></span></span></div><div class="line alt2"><code class="number">50.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 20px !important;"><code class="comments">// Прерывание вызвано приемом байта ?</code></span></span></div><div class="line alt1"><code class="number">51.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 20px !important;"><code class="plain">uint8_t data = SPI1-&gt;DR; </code><code class="comments">//Читаем то что пришло</code></span></span></div><div class="line alt2"><code class="number">52.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 20px !important;"><code class="plain">GPIOC-&gt;ODR ^= (GPIO_Pin_9 | GPIO_Pin_8); </code><code class="comments">//Инвертируем состояние светодиодов</code></span></span></div><div class="line alt1"><code class="number">53.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 20px !important;"><code class="plain">SPI1-&gt;DR = data; </code><code class="comments">//И отправляем обратно то что приняли</code></span></span></div><div class="line alt2"><code class="number">54.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">}</code></span></span></div><div class="line alt1"><code class="number">55.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">}</code></span></span></div></div></div></div></div>
<div style="text-align: justify;">&nbsp;</div>
<div style="text-align: justify;">Исходный код для платы STM32F4DISCOVERY&nbsp;</div>
<p style="text-align: justify;"></p><div style="overflow: hidden; display: block; height: auto; width: inherit;"><div id="highlighter_572227" class="syntaxhighlighter "><div class="bar         "><div class="toolbar"><a href="http://easystm32.ru/interfaces/45-spi-interface-part-2#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_572227_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_572227" menu="false" src="http://easystm32.ru/plugins/content/CodeCitation/codecitation/scripts/clipboard.swf"></div><a href="http://easystm32.ru/interfaces/45-spi-interface-part-2#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://easystm32.ru/interfaces/45-spi-interface-part-2#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><code class="number">01.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">#include "stm32f4xx.h"</code></span></span></div><div class="line alt2"><code class="number">02.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">#include "stm32f4xx_gpio.h"</code></span></span></div><div class="line alt1"><code class="number">03.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">#include "stm32f4xx_rcc.h"</code></span></span></div><div class="line alt2"><code class="number">04.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">#include "stm32f4xx_spi.h"</code></span></span></div><div class="line alt1"><code class="number">05.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 5px !important;">&nbsp;</span></span></div><div class="line alt2"><code class="number">06.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">#define LED_PORT GPIOD</code></span></span></div><div class="line alt1"><code class="number">07.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">#define LED_GREEN (1&lt;&lt;12)</code></span></span></div><div class="line alt2"><code class="number">08.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">#define LED_RED (1&lt;&lt;14)</code></span></span></div><div class="line alt1"><code class="number">09.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="preprocessor">#define LED_BLUE (1&lt;&lt;15)</code></span></span></div><div class="line alt2"><code class="number">10.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 5px !important;">&nbsp;</span></span></div><div class="line alt1"><code class="number">11.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="keyword bold">void</code> <code class="plain">delay(</code><code class="keyword bold">void</code><code class="plain">) {</code></span></span></div><div class="line alt2"><code class="number">12.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 5px !important;"><code class="keyword bold">volatile</code> <code class="plain">uint32_t i;</code></span></span></div><div class="line alt1"><code class="number">13.</code><span class="content"><code class="spaces">&nbsp;</code><span class="block" style="margin-left: 5px !important;"><code class="keyword bold">for</code> <code class="plain">(i=1; i != 0x1FFFF; i++)</code></span></span></div><div class="line alt2"><code class="number">14.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">;</code></span></span></div><div class="line alt1"><code class="number">15.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">}</code></span></span></div><div class="line alt2"><code class="number">16.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="color1 bold">int</code> <code class="plain">main(</code><code class="keyword bold">void</code><code class="plain">) {</code></span></span></div><div class="line alt1"><code class="number">17.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitTypeDef GPIO_InitStructure;</code></span></span></div><div class="line alt2"><code class="number">18.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitTypeDef SPI_InitStructure;</code></span></span></div><div class="line alt1"><code class="number">19.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="comments">//Тактирование порта со светодиодами</code></span></span></div><div class="line alt2"><code class="number">20.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOD, ENABLE);</code></span></span></div><div class="line alt1"><code class="number">21.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_OUT;</code></span></span></div><div class="line alt2"><code class="number">22.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</code></span></span></div><div class="line alt1"><code class="number">23.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;</code></span></span></div><div class="line alt2"><code class="number">24.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="comments">//Пины со светодиодами настраиваем как выходы</code></span></span></div><div class="line alt1"><code class="number">25.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_Pin = ( LED_GREEN | LED_RED | LED_BLUE) ;</code></span></span></div><div class="line alt2"><code class="number">26.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_Init(LED_PORT, &amp;GPIO_InitStructure);</code></span></span></div><div class="line alt1"><code class="number">27.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="comments">// Тактирование модуля SPI1 и порта А</code></span></span></div><div class="line alt2"><code class="number">28.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">RCC_APB2PeriphClockCmd(RCC_APB2Periph_SPI1, ENABLE);</code></span></span></div><div class="line alt1"><code class="number">29.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOA, ENABLE);</code></span></span></div><div class="line alt2"><code class="number">30.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="comments">// Настраиваем ноги SPI1 для работы в режиме альтернативной функции</code></span></span></div><div class="line alt1"><code class="number">31.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_PinAFConfig(GPIOA, GPIO_PinSource7, GPIO_AF_SPI1);</code></span></span></div><div class="line alt2"><code class="number">32.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_PinAFConfig(GPIOA, GPIO_PinSource5, GPIO_AF_SPI1);</code></span></span></div><div class="line alt1"><code class="number">33.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_PinAFConfig(GPIOA, GPIO_PinSource6, GPIO_AF_SPI1);</code></span></span></div><div class="line alt2"><code class="number">34.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;</code></span></span></div><div class="line alt1"><code class="number">35.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</code></span></span></div><div class="line alt2"><code class="number">36.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;</code></span></span></div><div class="line alt1"><code class="number">37.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_NOPULL;</code></span></span></div><div class="line alt2"><code class="number">38.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_Pin = GPIO_Pin_7 | GPIO_Pin_6 | GPIO_Pin_5;</code></span></span></div><div class="line alt1"><code class="number">39.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_Init(GPIOA, &amp;GPIO_InitStructure);</code></span></span></div><div class="line alt2"><code class="number">40.</code><span class="content"><span class="block" style="margin-left: 0px !important;">&nbsp;</span></span></div><div class="line alt1"><code class="number">41.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_OUT;</code></span></span></div><div class="line alt2"><code class="number">42.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</code></span></span></div><div class="line alt1"><code class="number">43.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;</code></span></span></div><div class="line alt2"><code class="number">44.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_InitStructure.GPIO_Pin = GPIO_Pin_4;</code></span></span></div><div class="line alt1"><code class="number">45.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">GPIO_Init(GPIOA, &amp;GPIO_InitStructure);</code></span></span></div><div class="line alt2"><code class="number">46.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="comments">//Заполняем структуру с параметрами SPI модуля</code></span></span></div><div class="line alt1"><code class="number">47.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_Direction = SPI_Direction_2Lines_FullDuplex; </code><code class="comments">//полный дуплекс</code></span></span></div><div class="line alt2"><code class="number">48.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_DataSize = SPI_DataSize_8b; </code><code class="comments">// передаем по 8 бит</code></span></span></div><div class="line alt1"><code class="number">49.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_CPOL = SPI_CPOL_Low; </code><code class="comments">// Полярность и</code></span></span></div><div class="line alt2"><code class="number">50.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_CPHA = SPI_CPHA_1Edge; </code><code class="comments">// фаза тактового сигнала</code></span></span></div><div class="line alt1"><code class="number">51.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_NSS = SPI_NSS_Soft; </code><code class="comments">// Управлять состоянием сигнала NSS программно</code></span></span></div><div class="line alt2"><code class="number">52.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_BaudRatePrescaler = SPI_BaudRatePrescaler_32; </code><code class="comments">// Предделитель SCK</code></span></span></div><div class="line alt1"><code class="number">53.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_FirstBit = SPI_FirstBit_MSB; </code><code class="comments">// Первым отправляется старший бит</code></span></span></div><div class="line alt2"><code class="number">54.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_InitStructure.SPI_Mode = SPI_Mode_Master; </code><code class="comments">// Режим - мастер</code></span></span></div><div class="line alt1"><code class="number">55.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_Init(SPI1, &amp;SPI_InitStructure); </code><code class="comments">//Настраиваем SPI1</code></span></span></div><div class="line alt2"><code class="number">56.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_Cmd(SPI1, ENABLE); </code><code class="comments">// Включаем модуль SPI1....</code></span></span></div><div class="line alt1"><code class="number">57.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="comments">// Поскольку сигнал NSS контролируется программно, установим его в единицу</code></span></span></div><div class="line alt2"><code class="number">58.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="comments">// Если сбросить его в ноль, то наш SPI модуль подумает, что</code></span></span></div><div class="line alt1"><code class="number">59.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="comments">// у нас мультимастерная топология и его лишили полномочий мастера.</code></span></span></div><div class="line alt2"><code class="number">60.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">SPI_NSSInternalSoftwareConfig(SPI1, SPI_NSSInternalSoft_Set);</code></span></span></div><div class="line alt1"><code class="number">61.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">uint8_t data = 0;</code></span></span></div><div class="line alt2"><code class="number">62.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="keyword bold">while</code><code class="plain">(1) {</code></span></span></div><div class="line alt1"><code class="number">63.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 20px !important;"><code class="plain">GPIO_ResetBits(GPIOA,GPIO_Pin_4); </code><code class="comments">//Подаем сигнал CS слейву</code></span></span></div><div class="line alt2"><code class="number">64.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 20px !important;"><code class="plain">SPI_I2S_SendData(SPI1, data); </code><code class="comments">//Передаем байт 0x93 через SPI1</code></span></span></div><div class="line alt1"><code class="number">65.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 20px !important;"><code class="keyword bold">while</code><code class="plain">(SPI_I2S_GetFlagStatus(SPI1, SPI_I2S_FLAG_BSY) == SET) </code><code class="comments">//Передатчик занят?</code></span></span></div><div class="line alt2"><code class="number">66.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 30px !important;"><code class="plain">; </code><code class="comments">// значит ничего не делаем</code></span></span></div><div class="line alt1"><code class="number">67.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 20px !important;"><code class="plain">GPIO_SetBits(GPIOA,GPIO_Pin_4); </code><code class="comments">//Снимаем сигнал CS</code></span></span></div><div class="line alt2"><code class="number">68.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 20px !important;"><code class="keyword bold">if</code> <code class="plain">(SPI_I2S_GetFlagStatus(SPI1, SPI_I2S_FLAG_RXNE) == SET) { </code><code class="comments">//Если данные пришли</code></span></span></div><div class="line alt1"><code class="number">69.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 30px !important;"><code class="keyword bold">if</code> <code class="plain">((data-1) == (uint8_t) SPI_I2S_ReceiveData(SPI1)) { </code><code class="comments">//Пришли правильные данные ?</code></span></span></div><div class="line alt2"><code class="number">70.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 35px !important;"><code class="comments">//Возможно тут есть неочевидный момент. Отправляем data, а ожидаем (data-1).</code></span></span></div><div class="line alt1"><code class="number">71.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 35px !important;"><code class="comments">// Это связано&nbsp; с тем, что слейв не может передавать данные пока мастер не</code></span></span></div><div class="line alt2"><code class="number">72.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 35px !important;"><code class="comments">// инициирует обмен данными. Таким образом если мастер сейчас передает</code></span></span></div><div class="line alt1"><code class="number">73.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 35px !important;"><code class="comments">// число 123, то оно ему вернется когда он будет передавать следующий байт (124). </code></span></span></div><div class="line alt2"><code class="number">74.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 40px !important;"><code class="plain">GPIO_SetBits(LED_PORT,LED_GREEN);</code></span></span></div><div class="line alt1"><code class="number">75.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 40px !important;"><code class="plain">GPIO_ResetBits(LED_PORT,LED_RED);</code></span></span></div><div class="line alt2"><code class="number">76.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 30px !important;"><code class="plain">} </code><code class="keyword bold">else</code> <code class="plain">{</code></span></span></div><div class="line alt1"><code class="number">77.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 40px !important;"><code class="plain">GPIO_SetBits(LED_PORT,LED_RED);</code></span></span></div><div class="line alt2"><code class="number">78.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 40px !important;"><code class="plain">GPIO_ResetBits(LED_PORT,LED_GREEN);</code></span></span></div><div class="line alt1"><code class="number">79.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 30px !important;"><code class="plain">}</code></span></span></div><div class="line alt2"><code class="number">80.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 20px !important;"><code class="plain">}</code></span></span></div><div class="line alt1"><code class="number">81.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 20px !important;"><code class="plain">data++; </code></span></span></div><div class="line alt2"><code class="number">82.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 20px !important;"><code class="plain">delay();</code></span></span></div><div class="line alt1"><code class="number">83.</code><span class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><span class="block" style="margin-left: 20px !important;"><code class="plain">GPIO_ToggleBits(LED_PORT,LED_BLUE); </code><code class="comments">//Подмигнем синим светодиодом</code></span></span></div><div class="line alt2"><code class="number">84.</code><span class="content"><code class="spaces">&nbsp;&nbsp;</code><span class="block" style="margin-left: 10px !important;"><code class="plain">}</code></span></span></div><div class="line alt1"><code class="number">85.</code><span class="content"><span class="block" style="margin-left: 0px !important;"><code class="plain">}</code></span></span></div></div></div></div><p></p>
<p style="text-align: justify;">Если мои наработки по части SPI окажутся полезными то я буду рад :) Если есть вопросы и замечания - &nbsp;пишите, постараюсь ответить.&nbsp;</p>	</div>
</div>
                                                                 </div>
              </div>
                        </div>
                                    <div id="col2">
                          	<div class="moduletable_menu"> 
		      
		<h3 class="module-title">Разделы сайта</h3>
				<div class="res">
	    <div class="module-content">
	        
<ul class="menu">
<li class="item-101"><a href="http://easystm32.ru/">Главная страница</a></li><li class="item-108"><a href="http://easystm32.ru/for-beginners">Для начинающих</a></li><li class="item-107"><a href="http://easystm32.ru/stm32vl-discovery">STM32VL Discovery</a></li><li class="item-147"><a href="http://easystm32.ru/stm32f4-discovery">STM32F4 Discovery</a></li><li class="item-109"><a href="http://easystm32.ru/tools">Инструменты</a></li><li class="item-110 current active"><a href="http://easystm32.ru/interfaces">Интерфейсы</a></li><li class="item-111"><a href="http://easystm32.ru/technologies">Технологии</a></li><li class="item-112"><a href="http://easystm32.ru/useful-things">Полезности</a></li><li class="item-113"><a href="http://easystm32.ru/indication">Индикация</a></li><li class="item-114"><a href="http://easystm32.ru/power-supplies">Питание</a></li><li class="item-115"><a href="http://easystm32.ru/projects">Проекты</a></li><li class="item-116"><a href="http://easystm32.ru/sensors">Датчики</a></li><li class="item-117"><a href="http://easystm32.ru/debug">Отладка</a></li></ul>
        </div>
        </div><div class="modul"></div></div>
		<div class="moduletable"> 
		      
		<h3 class="module-title">Форма входа</h3>
				<div class="res">
	    <div class="module-content">
	        <form action="http://easystm32.ru/interfaces" method="post" id="login-form">
		<fieldset class="userdata">
	<p id="form-login-username">
		<label for="modlgn-username">Логин</label>
		<input id="modlgn-username" type="text" name="username" class="inputbox" size="18">
	</p>
	<p id="form-login-password">
		<label for="modlgn-passwd">Пароль</label>
		<input id="modlgn-passwd" type="password" name="password" class="inputbox" size="18">
	</p>
		<p id="form-login-remember">
		<label for="modlgn-remember">Запомнить меня</label>
		<input id="modlgn-remember" type="checkbox" name="remember" class="inputbox" value="yes">
	</p>
		<input type="submit" name="Submit" class="button" value="Войти">
	<input type="hidden" name="option" value="com_users">
	<input type="hidden" name="task" value="user.login">
	<input type="hidden" name="return" value="aW5kZXgucGhwP29wdGlvbj1jb21fY29udGVudCZ2aWV3PWFydGljbGUmY2F0aWQ9MTImaWQ9NDUmSXRlbWlkPTExMA==">
	<input type="hidden" name="036c087821eaf3c8efc8a48f2258bacb" value="1">	</fieldset>
	<ul>
		<li>
			<a href="http://easystm32.ru/component/users/?view=reset">
			Забыли пароль?</a>
		</li>
		<li>
			<a href="http://easystm32.ru/component/users/?view=remind">
			Забыли логин?</a>
		</li>
			</ul>
	</form>
        </div>
        </div><div class="modul"></div></div>
	
                        </div>
                                            </div>
                </div>
            </div>
            <div id="footer">
    
    <div class="copy">
    Copyright &nbsp;© 2012 <a href="http://easystm32.ru/component/xmap/xml?option=com_xmap&view=xml&id=1">EasySTM32.</a> All Rights Reserved. Запрещено копирование материалов без активной ссылки на этот сайт.<br>
	Реклама:  Купить <a href="http://www.metalloiskateli-kazan.ru/" target="_blank">металлоискатели в Казане</a> по выгодным ценам .  Оформить покупку <a href="http://www.syssoft.ru/e-store/catalog/detail.php?IBLOCK_ID=16&SECTION_ID=2038" target="_blank">лицензии касперского на 1 год</a> можно в интернет магазине компании СИССОФТ.     </div>
					<!-- Yandex.Metrika counter -->
				<script type="text/javascript">
				(function (d, w, c) {
					(w[c] = w[c] || []).push(function() {
						try {
							w.yaCounter14614684 = new Ya.Metrika({id:14614684});
						} catch(e) {}
					});
					
					var n = d.getElementsByTagName("script")[0],
						s = d.createElement("script"),
						f = function () { n.parentNode.insertBefore(s, n); };
					s.type = "text/javascript";
					s.async = true;
					s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

					if (w.opera == "[object Opera]") {
						d.addEventListener("DOMContentLoaded", f);
					} else { f(); }
				})(document, window, "yandex_metrika_callbacks");
				</script>
				<noscript>&lt;div&gt;&lt;img src="//mc.yandex.ru/watch/14614684" style="position:absolute; left:-9999px;" alt="" /&gt;&lt;/div&gt;</noscript>
				<!-- /Yandex.Metrika counter -->


	<div id="dummy"></div>
    <div id="debug">
  
  </div>
</div>
        </div>  
    </div>
            </div> 

   <script type="text/javascript" src="./EasySTM32 - Интерфейс SPI в STM32. Часть 2_files/jquery.min.js"></script> 
   <script type="text/javascript"> 
$(document).ready(function(){
						   		   
	//When you click on a link with class of poplight and the href starts with a # 
	$('a.poplight[href^=#]').click(function() {
		var popID = $(this).attr('rel'); //Get Popup Name
		var popURL = $(this).attr('href'); //Get Popup href to define size
				
		//Pull Query & Variables from href URL
		var param= popURL.substr(1);
		var data = "<iframe width=\"500\" height=\"438\" src=\"http://easystm32.ru/getreg.php" + param + "\"></iframe>";
		document.getElementById('popup_name').innerHTML=data;
		//Добавить кнопку "Закрыть" в наше окно, прописываете прямой путь к картинке кнопки
		$('#' + popID).fadeIn().css({ 'width': Number( 500 ) }).prepend('<a href="#" class="close"><img src="/templates/shoplab/images/close_pop.png" class="btn_close" title="Закрыть окно" alt="Закрыть" /></a>');
		
		//Определяет запас на выравнивание по центру (по вертикали по горизонтали)мы добавим 80px к высоте / ширине, значение полей вокруг содержимого (padding) и ширину границы устанавливаем в CSS
		var popMargTop = ($('#' + popID).height() + 80) / 2;
		var popMargLeft = ($('#' + popID).width() + 80) / 2;
		
		//Применяем отступы в всплывающем окне
		$('#' + popID).css({ 
			'margin-top' : -popMargTop,
			'margin-left' : -popMargLeft
		});
		
		//Фон слоя затемнения
		$('body').append('<div id="fade"></div>'); //Добавляем слой затемнения.
		$('#fade').css({'filter' : 'alpha(opacity=80)'}).fadeIn(); //Постепенное исчезание слоя - .css({'filter' : 'alpha(opacity=80)'}) используется для фиксации в IE, фильтр для устранения бага тупого IE 
		
		return false;
	});
	
	
	//Закрыть всплывающее окно и слой затемнения
	$('a.close, #fade').live('click', function() { //При нажатии рядом, окно и слой затемнения закрываются 
	  	$('#fade , .popup_block').fadeOut(function() {
			$('#fade, a.close').remove();  
	}); //fade them both out
		
		return false;
	});
 
	
});
</script>
   
  
</body></html>